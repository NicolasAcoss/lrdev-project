{
    "log": {
        "version": "1.2",
        "creator": {
            "name": "DevWeb",
            "version": "1.2"
        },
        "pages": [
            {
                "startedDateTime": "2022-12-06T11:38:15.920492Z",
                "id": "page_1",
                "title": "https://mail.etu.univ-lorraine.fr/zimbra/js/ContactsCore_all.js.zgz",
                "pageTimings": {}
            }
        ],
        "entries": [
            {
                "pageref": "page_1",
                "startedDateTime": "2022-12-06T11:38:15.920492Z",
                "time": 0,
                "_isResource": false,
                "request": {
                    "method": "GET",
                    "url": "https://mail.etu.univ-lorraine.fr/zimbra/js/ContactsCore_all.js.zgz?v=220726112844",
                    "httpVersion": "HTTP/2.0",
                    "cookies": [
                        {
                            "name": "UL-AUTHTRACE",
                            "value": "TRACE-4112-JXC2ao-ce1Zm2D1QbNJ8m16DlLYEFM9cZACAS-LEIA",
                            "httpOnly": false
                        },
                        {
                            "name": "JSESSIONID",
                            "value": "node01ewv5q86m64i21vkfxtflutla86873.node0",
                            "httpOnly": false
                        },
                        {
                            "name": "ZM_AUTH_TOKEN",
                            "value": "0_a80cf5ba65b244a73d683b9482d447f357160abf_69643d33363a62636630316235642d373166332d343464652d396163322d3235343836613061666531323b6578703d31333a313637303336363239323738353b747970653d363a7a696d6272613b753d313a613b7469643d31303a313932323132303830333b76657273696f6e3d31343a382e382e31355f47415f333836393b",
                            "httpOnly": false
                        }
                    ],
                    "headers": [
                        {
                            "name": "accept",
                            "value": "*/*"
                        },
                        {
                            "name": "accept-encoding",
                            "value": "gzip, deflate, br"
                        },
                        {
                            "name": "accept-language",
                            "value": "fr,fr-FR;q=0.8,en-US;q=0.5,en;q=0.3"
                        },
                        {
                            "name": "cookie",
                            "value": "UL-AUTHTRACE=TRACE-4112-JXC2ao-ce1Zm2D1QbNJ8m16DlLYEFM9cZACAS-LEIA; JSESSIONID=node01ewv5q86m64i21vkfxtflutla86873.node0; ZM_AUTH_TOKEN=0_a80cf5ba65b244a73d683b9482d447f357160abf_69643d33363a62636630316235642d373166332d343464652d396163322d3235343836613061666531323b6578703d31333a313637303336363239323738353b747970653d363a7a696d6272613b753d313a613b7469643d31303a313932323132303830333b76657273696f6e3d31343a382e382e31355f47415f333836393b"
                        },
                        {
                            "name": "dnt",
                            "value": "1"
                        },
                        {
                            "name": "referer",
                            "value": "https://mail.etu.univ-lorraine.fr/"
                        },
                        {
                            "name": "sec-fetch-dest",
                            "value": "script"
                        },
                        {
                            "name": "sec-fetch-mode",
                            "value": "no-cors"
                        },
                        {
                            "name": "sec-fetch-site",
                            "value": "same-origin"
                        },
                        {
                            "name": "te",
                            "value": "trailers"
                        },
                        {
                            "name": "user-agent",
                            "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:102.0) Gecko/20100101 Firefox/102.0"
                        }
                    ],
                    "queryString": [
                        {
                            "name": "v",
                            "value": "220726112844"
                        }
                    ],
                    "headersSize": -1,
                    "bodySize": -1
                },
                "response": {
                    "status": 200,
                    "statusText": "OK",
                    "httpVersion": "HTTP/2.0",
                    "cookies": null,
                    "headers": [
                        {
                            "name": "accept-ranges",
                            "value": "bytes"
                        },
                        {
                            "name": "cache-control",
                            "value": "public, max-age=2595600"
                        },
                        {
                            "name": "content-type",
                            "value": "text/javascript"
                        },
                        {
                            "name": "date",
                            "value": "Tue, 06 Dec 2022 10:38:16 GMT"
                        },
                        {
                            "name": "expires",
                            "value": "Thu, 5 Jan 2023 11:38:16 GMT"
                        },
                        {
                            "name": "last-modified",
                            "value": "Tue, 26 Jul 2022 15:29:28 GMT"
                        },
                        {
                            "name": "server",
                            "value": "nginx"
                        },
                        {
                            "name": "x-frame-options",
                            "value": "SAMEORIGIN"
                        },
                        {
                            "name": "x-recouv-allowed",
                            "value": "Recouv"
                        }
                    ],
                    "content": {
                        "size": 133584,
                        "mimeType": "",
                        "text": "\n/* \n* Zimbra Collaboration Suite Web Client\n* Copyright (C) 2004-2017 Synacor, Inc.\n* https://www.zimbra.com/license\n*/\nif(AjxPackage.define(\"ContactsCore\")){if(AjxPackage.define(\"zimbraMail.abook.model.ZmAddrBook\")){ZmAddrBook=function(a){a.type=ZmOrganizer.ADDRBOOK;\nZmFolder.call(this,a)\n};\nZmAddrBook.prototype=new ZmFolder;\nZmAddrBook.prototype.constructor=ZmAddrBook;\nZmAddrBook.prototype.isZmAddrBook=true;\nZmAddrBook.prototype.toString=function(){return\"ZmAddrBook\"\n};\nZmAddrBook.ID_ADDRESSBOOK=ZmOrganizer.ID_ADDRBOOK;\nZmAddrBook.prototype.getIcon=function(){if(this.nId==ZmFolder.ID_ROOT){return null\n}if(this.nId==ZmFolder.ID_TRASH){return\"Trash\"\n}if(this.link||this.isRemote()){return\"SharedContactsFolder\"\n}if(this.nId==ZmFolder.ID_AUTO_ADDED){return\"EmailedContacts\"\n}return\"ContactsFolder\"\n};\nZmAddrBook.prototype.supportsPublicAccess=function(){return true\n};\nZmAddrBook.prototype.mayContain=function(d){if(!d){return true\n}if(this.id==ZmOrganizer.ID_DLS){return false\n}if(d.isZmAddrBook){return ZmFolder.prototype.mayContain.apply(this,arguments)\n}var a=AjxUtil.toArray(d);\nfor(var b=0;\nb<a.length;\nb++){var c=a[b];\nif(c.type!==ZmItem.CONTACT&&c.type!==ZmItem.GROUP){return false\n}}return ZmFolder.prototype.mayContain.apply(this,arguments)\n}\n}if(AjxPackage.define(\"zimbraMail.abook.model.ZmContact\")){if(!window.ZmContact){ZmContact=function(d,c,a,b){if(arguments.length==0){return\n}a=a||ZmItem.CONTACT;\nZmItem.call(this,a,d,c);\nthis.attr={};\nthis.isGal=(this.list&&this.list.isGal)||b;\nif(b){this.folderId=ZmFolder.ID_DLS;\nthis.dlInfo={isMember:false,isOwner:true,subscriptionPolicy:null,unsubscriptionPolicy:null,description:\"\",displayName:\"\",notes:\"\",hideInGal:false,mailPolicy:null,owners:[appCtxt.get(ZmSetting.USERNAME)]}\n}this.participants=new AjxVector()\n};\nZmContact.prototype=new ZmItem;\nZmContact.prototype.constructor=ZmContact;\nZmContact.prototype.isZmContact=true;\nZmContact.F_anniversary=\"anniversary\";\nZmContact.F_assistantPhone=\"assistantPhone\";\nZmContact.F_attachment=\"attachment\";\nZmContact.F_birthday=\"birthday\";\nZmContact.F_callbackPhone=\"callbackPhone\";\nZmContact.F_carPhone=\"carPhone\";\nZmContact.F_company=\"company\";\nZmContact.F_companyPhone=\"companyPhone\";\nZmContact.F_custom=\"custom\";\nZmContact.F_description=\"description\";\nZmContact.F_department=\"department\";\nZmContact.F_dlist=\"dlist\";\nZmContact.F_dlDisplayName=\"dldisplayname\";\nZmContact.F_dlDesc=\"dldesc\";\nZmContact.F_dlHideInGal=\"dlhideingal\";\nZmContact.F_dlNotes=\"dlnotes\";\nZmContact.F_dlSubscriptionPolicy=\"dlsubspolicy\";\nZmContact.F_dlMailPolicy=\"dlmailpolicy\";\nZmContact.F_dlMailPolicySpecificMailers=\"dlmailpolicyspecificmailers\";\nZmContact.F_dlUnsubscriptionPolicy=\"dlunsubspolicy\";\nZmContact.F_dlListOwners=\"dllistowners\";\nZmContact.F_email=\"email\";\nZmContact.F_email2=\"email2\";\nZmContact.F_email3=\"email3\";\nZmContact.F_email4=\"email4\";\nZmContact.F_email5=\"email5\";\nZmContact.F_email6=\"email6\";\nZmContact.F_email7=\"email7\";\nZmContact.F_email8=\"email8\";\nZmContact.F_email9=\"email9\";\nZmContact.F_email10=\"email10\";\nZmContact.F_email11=\"email11\";\nZmContact.F_email12=\"email12\";\nZmContact.F_email13=\"email13\";\nZmContact.F_email14=\"email14\";\nZmContact.F_email15=\"email15\";\nZmContact.F_email16=\"email16\";\nZmContact.F_fileAs=\"fileAs\";\nZmContact.F_firstName=\"firstName\";\nZmContact.F_folderId=\"folderId\";\nZmContact.F_groups=\"groups\";\nZmContact.F_homeCity=\"homeCity\";\nZmContact.F_homeCountry=\"homeCountry\";\nZmContact.F_homeFax=\"homeFax\";\nZmContact.F_homePhone=\"homePhone\";\nZmContact.F_homePhone2=\"homePhone2\";\nZmContact.F_homePostalCode=\"homePostalCode\";\nZmContact.F_homeState=\"homeState\";\nZmContact.F_homeStreet=\"homeStreet\";\nZmContact.F_homeURL=\"homeURL\";\nZmContact.F_image=\"image\";\nZmContact.F_imAddress=\"imAddress\";\nZmContact.F_imAddress1=\"imAddress1\";\nZmContact.F_imAddress2=\"imAddress2\";\nZmContact.F_imAddress3=\"imAddress3\";\nZmContact.F_jobTitle=\"jobTitle\";\nZmContact.F_lastName=\"lastName\";\nZmContact.F_maidenName=\"maidenName\";\nZmContact.F_memberC=\"memberC\";\nZmContact.F_memberG=\"memberG\";\nZmContact.F_memberI=\"memberI\";\nZmContact.F_middleName=\"middleName\";\nZmContact.F_mobilePhone=\"mobilePhone\";\nZmContact.F_namePrefix=\"namePrefix\";\nZmContact.F_nameSuffix=\"nameSuffix\";\nZmContact.F_nickname=\"nickname\";\nZmContact.F_notes=\"notes\";\nZmContact.F_otherCity=\"otherCity\";\nZmContact.F_otherCountry=\"otherCountry\";\nZmContact.F_otherFax=\"otherFax\";\nZmContact.F_otherPhone=\"otherPhone\";\nZmContact.F_otherPostalCode=\"otherPostalCode\";\nZmContact.F_otherState=\"otherState\";\nZmContact.F_otherStreet=\"otherStreet\";\nZmContact.F_otherURL=\"otherURL\";\nZmContact.F_pager=\"pager\";\nZmContact.F_phoneticFirstName=\"phoneticFirstName\";\nZmContact.F_phoneticLastName=\"phoneticLastName\";\nZmContact.F_phoneticCompany=\"phoneticCompany\";\nZmContact.F_type=\"type\";\nZmContact.F_workAltPhone=\"workAltPhone\";\nZmContact.F_workCity=\"workCity\";\nZmContact.F_workCountry=\"workCountry\";\nZmContact.F_workEmail1=\"workEmail1\";\nZmContact.F_workEmail2=\"workEmail2\";\nZmContact.F_workEmail3=\"workEmail3\";\nZmContact.F_workFax=\"workFax\";\nZmContact.F_workMobile=\"workMobile\";\nZmContact.F_workPhone=\"workPhone\";\nZmContact.F_workPhone2=\"workPhone2\";\nZmContact.F_workPostalCode=\"workPostalCode\";\nZmContact.F_workState=\"workState\";\nZmContact.F_workStreet=\"workStreet\";\nZmContact.F_workURL=\"workURL\";\nZmContact.F_imagepart=\"imagepart\";\nZmContact.F_zimletImage=\"zimletImage\";\nZmContact.X_fileAs=\"fileAs\";\nZmContact.X_firstLast=\"firstLast\";\nZmContact.X_fullName=\"fullName\";\nZmContact.X_vcardXProps=\"vcardXProps\";\nZmContact.X_outlookUserField=\"outlookUserField\";\nZmContact.MC_cardOwner=\"cardOwner\";\nZmContact.MC_workCardMessage=\"workCardMessage\";\nZmContact.MC_homeCardMessage=\"homeCardMessage\";\nZmContact.MC_homePhotoURL=\"homePhotoURL\";\nZmContact.MC_workPhotoURL=\"workPhotoURL\";\nZmContact.GAL_MODIFY_TIMESTAMP=\"modifyTimeStamp\";\nZmContact.GAL_CREATE_TIMESTAMP=\"createTimeStamp\";\nZmContact.GAL_ZIMBRA_ID=\"zimbraId\";\nZmContact.GAL_OBJECT_CLASS=\"objectClass\";\nZmContact.GAL_MAIL_FORWARD_ADDRESS=\"zimbraMailForwardingAddress\";\nZmContact.GAL_CAL_RES_TYPE=\"zimbraCalResType\";\nZmContact.GAL_CAL_RES_LOC_NAME=\"zimbraCalResLocationDisplayName\";\n(function(){var a=1;\nZmContact.FA_LAST_C_FIRST=a++;\nZmContact.FA_FIRST_LAST=a++;\nZmContact.FA_COMPANY=a++;\nZmContact.FA_LAST_C_FIRST_COMPANY=a++;\nZmContact.FA_FIRST_LAST_COMPANY=a++;\nZmContact.FA_COMPANY_LAST_C_FIRST=a++;\nZmContact.FA_COMPANY_FIRST_LAST=a++;\nZmContact.FA_CUSTOM=a++\n})();\nZmContact.ADDRESS_FIELDS=[ZmContact.F_homeCity,ZmContact.F_homeCountry,ZmContact.F_homePostalCode,ZmContact.F_homeState,ZmContact.F_homeStreet,ZmContact.F_workCity,ZmContact.F_workCountry,ZmContact.F_workPostalCode,ZmContact.F_workState,ZmContact.F_workStreet,ZmContact.F_otherCity,ZmContact.F_otherCountry,ZmContact.F_otherPostalCode,ZmContact.F_otherState,ZmContact.F_otherStreet];\nZmContact.EMAIL_FIELDS=[ZmContact.F_email,ZmContact.F_workEmail1,ZmContact.F_workEmail2,ZmContact.F_workEmail3];\nZmContact.IM_FIELDS=[ZmContact.F_imAddress];\nZmContact.OTHER_FIELDS=[ZmContact.F_birthday,ZmContact.F_anniversary,ZmContact.F_custom];\nZmContact.PHONE_FIELDS=[ZmContact.F_mobilePhone,ZmContact.F_workPhone,ZmContact.F_workFax,ZmContact.F_companyPhone,ZmContact.F_homePhone,ZmContact.F_homeFax,ZmContact.F_pager,ZmContact.F_callbackPhone,ZmContact.F_assistantPhone,ZmContact.F_carPhone,ZmContact.F_otherPhone,ZmContact.F_otherFax,ZmContact.F_workAltPhone,ZmContact.F_workMobile];\nZmContact.PRIMARY_FIELDS=[ZmContact.F_image,ZmContact.F_namePrefix,ZmContact.F_firstName,ZmContact.F_phoneticFirstName,ZmContact.F_middleName,ZmContact.F_maidenName,ZmContact.F_lastName,ZmContact.F_phoneticLastName,ZmContact.F_nameSuffix,ZmContact.F_nickname,ZmContact.F_jobTitle,ZmContact.F_department,ZmContact.F_company,ZmContact.F_phoneticCompany,ZmContact.F_fileAs,ZmContact.F_folderId,ZmContact.F_notes];\nZmContact.URL_FIELDS=[ZmContact.F_homeURL,ZmContact.F_workURL,ZmContact.F_otherURL];\nZmContact.GAL_FIELDS=[ZmContact.GAL_MODIFY_TIMESTAMP,ZmContact.GAL_CREATE_TIMESTAMP,ZmContact.GAL_ZIMBRA_ID,ZmContact.GAL_OBJECT_CLASS,ZmContact.GAL_MAIL_FORWARD_ADDRESS,ZmContact.GAL_CAL_RES_TYPE,ZmContact.GAL_CAL_RES_LOC_NAME,ZmContact.F_type];\nZmContact.MYCARD_FIELDS=[ZmContact.MC_cardOwner,ZmContact.MC_homeCardMessage,ZmContact.MC_homePhotoURL,ZmContact.MC_workCardMessage,ZmContact.MC_workPhotoURL];\nZmContact.X_FIELDS=[ZmContact.X_firstLast,ZmContact.X_fullName,ZmContact.X_vcardXProps];\nZmContact.IGNORE_NORMALIZATION=[];\nZmContact.ADDR_PREFIXES=[\"work\",\"home\",\"other\"];\nZmContact.ADDR_SUFFIXES=[\"Street\",\"City\",\"State\",\"PostalCode\",\"Country\"];\nZmContact.updateFieldConstants=function(){for(var b=0;\nb<ZmContact.ADDR_PREFIXES.length;\nb++){for(var a=0;\na<ZmContact.ADDR_SUFFIXES.length;\na++){ZmContact.IGNORE_NORMALIZATION.push(ZmContact.ADDR_PREFIXES[b]+ZmContact.ADDR_SUFFIXES[a])\n}}ZmContact.DISPLAY_FIELDS=[].concat(ZmContact.ADDRESS_FIELDS,ZmContact.EMAIL_FIELDS,ZmContact.IM_FIELDS,ZmContact.OTHER_FIELDS,ZmContact.PHONE_FIELDS,ZmContact.PRIMARY_FIELDS,ZmContact.URL_FIELDS);\nZmContact.IGNORE_FIELDS=[].concat(ZmContact.GAL_FIELDS,ZmContact.MYCARD_FIELDS,ZmContact.X_FIELDS,[ZmContact.F_imagepart]);\nZmContact.ALL_FIELDS=[].concat(ZmContact.DISPLAY_FIELDS,ZmContact.IGNORE_FIELDS);\nZmContact.IS_DATE={};\nZmContact.IS_DATE[ZmContact.F_birthday]=true;\nZmContact.IS_DATE[ZmContact.F_anniversary]=true;\nZmContact.IS_IGNORE=AjxUtil.arrayAsHash(ZmContact.IGNORE_FIELDS);\nZmContact.DL_PAGE_SIZE=100;\nZmContact.GROUP_CONTACT_REF=\"C\";\nZmContact.GROUP_GAL_REF=\"G\";\nZmContact.GROUP_INLINE_REF=\"I\"\n};\nZmContact.updateFieldConstants();\nZmContact.IS_ADDONE={};\nZmContact.IS_ADDONE[ZmContact.F_custom]=true;\nZmContact.IS_ADDONE[ZmContact.F_imAddress]=true;\nZmContact.IS_ADDONE[ZmContact.X_outlookUserField]=true;\nZmContact.getAttributeName=function(b,a){a=a||1;\nreturn a>1||ZmContact.IS_ADDONE[b]?b+a:b\n};\nZmContact.prototype.toString=function(){return\"ZmContact\"\n};\nZmContact.createFromDom=function(c,b){var a=appCtxt.cacheGet(c.id);\nif(a==null||(a&&a.rev!=c.rev)){a=new ZmContact(c.id,b.list);\nif(b.isGal){a.isGal=b.isGal\n}a._loadFromDom(c);\nappCtxt.getApp(ZmApp.CONTACTS).getContactList().add(a)\n}else{if(c.m){a.attr[ZmContact.F_groups]=c.m\n}if(c.ref){a.ref=c.ref\n}if(c.tn){a._parseTagNames(c.tn)\n}AjxUtil.hashUpdate(a.attr,c._attrs);\na.list=b.list||new ZmContactList(null);\na._list=a._list||{};\na._list[a.list.id]=true\n}if(c.certificate){a.certificate=c.certificate\n}return a\n};\nZmContact.compareByFileAs=function(e,c){var d=(e instanceof ZmContact)?e.getFileAs(true):ZmContact.computeFileAs(e._attrs).toLowerCase();\nvar f=(c instanceof ZmContact)?c.getFileAs(true):ZmContact.computeFileAs(c._attrs).toLowerCase();\nif(!f||(d>f)){return 1\n}if(d<f){return -1\n}return 0\n};\nZmContact.computeFileAs=function(c){var b=(c instanceof ZmContact)?c.getAttrs():c;\nif(!b){return\n}if(b[ZmContact.F_dlDisplayName]){return b[ZmContact.F_dlDisplayName]\n}var f=parseInt(b.fileAs);\nvar e;\nvar a=0;\nswitch(f){case ZmContact.FA_LAST_C_FIRST:default:if(c&&c.isGal){if(b.fullName){return(b.fullName instanceof Array)?b.fullName[0]:b.fullName\n}return((b.email instanceof Array)?b.email[0]:b.email)\n}e=ZmContact.fileAsLastFirst(b.firstName,b.lastName,b.fullName,b.nickname);\nbreak;\ncase ZmContact.FA_FIRST_LAST:e=ZmContact.fileAsFirstLast(b.firstName,b.lastName,b.fullName,b.nickname);\nbreak;\ncase ZmContact.FA_COMPANY:if(b.company){e=b.company\n}break;\ncase ZmContact.FA_LAST_C_FIRST_COMPANY:var d=ZmContact.fileAsLastFirst(b.firstName,b.lastName,b.fullName,b.nickname);\ne=ZmContact.fileAsNameCompany(d,b.company);\nbreak;\ncase ZmContact.FA_FIRST_LAST_COMPANY:var d=ZmContact.fileAsFirstLast(b.firstName,b.lastName,b.fullName,b.nickname);\ne=ZmContact.fileAsNameCompany(d,b.company);\nbreak;\ncase ZmContact.FA_COMPANY_LAST_C_FIRST:var d=ZmContact.fileAsLastFirst(b.firstName,b.lastName);\ne=ZmContact.fileAsCompanyName(d,b.company);\nbreak;\ncase ZmContact.FA_COMPANY_FIRST_LAST:var d=ZmContact.fileAsFirstLast(b.firstName,b.lastName);\ne=ZmContact.fileAsCompanyName(d,b.company);\nbreak;\ncase ZmContact.FA_CUSTOM:return b.fileAs.substring(2);\nbreak\n}return e||b.fullName||\"\"\n};\nZmContact.fileAsFirstLast=function(d,c,b,a){if(d&&c){return AjxMessageFormat.format(ZmMsg.fileAsFirstLast,[d,c])\n}return d||c||b||a||\"\"\n};\nZmContact.fileAsLastFirst=function(d,c,b,a){if(d&&c){return AjxMessageFormat.format(ZmMsg.fileAsLastFirst,[d,c])\n}return c||d||b||a||\"\"\n};\nZmContact.fileAsNameCompany=function(b,a){if(b&&a){return AjxMessageFormat.format(ZmMsg.fileAsNameCompany,[b,a])\n}if(a){return AjxMessageFormat.format(ZmMsg.fileAsCompanyAsSecondaryOnly,[a])\n}return b\n};\nZmContact.fileAsCompanyName=function(b,a){if(a&&b){return AjxMessageFormat.format(ZmMsg.fileAsCompanyName,[b,a])\n}if(b){return AjxMessageFormat.format(ZmMsg.fileAsNameAsSecondaryOnly,[b])\n}return a\n};\nZmContact.computeCustomFileAs=function(a){return[ZmContact.FA_CUSTOM,\":\",a].join(\"\")\n};\nZmContact.getAttr=function(b,a){return(b instanceof ZmContact)?b.getAttr(a):(b&&b._attrs)?b._attrs[a]:null\n};\nZmContact.getPrefix=function(a){var b=a.replace(/\\d+$/,\"\");\nif(b===\"\"){return a\n}return b\n};\nZmContact.getNormalizedAttrs=function(l,f,h){var g={};\nif(l){var j=AjxUtil.keys(l);\nj.sort(ZmContact.__BY_ATTRIBUTE);\nvar k={};\nfor(var d=0;\nd<j.length;\nd++){var b=j[d];\nvar c=ZmContact.getPrefix(b);\nif(f&&f!=c){continue\n}if(AjxUtil.isArray(h)&&AjxUtil.indexOf(h,c)!=-1){g[b]=l[b]\n}else{if(!k[c]){k[c]=0\n}var e=ZmContact.getAttributeName(c,++k[c]);\ng[e]=l[b]\n}}}return g\n};\nZmContact.__RE_ATTRIBUTE=/^(.*?)(\\d+)$/;\nZmContact.__BY_ATTRIBUTE=function(d,c){var e=d.match(ZmContact.__RE_ATTRIBUTE)||[d,d,1];\nvar f=c.match(ZmContact.__RE_ATTRIBUTE)||[c,c,1];\nreturn e[1]==f[1]?Number(e[2])-Number(f[2]):e[1].localeCompare(f[1])\n};\nZmContact.setAttr=function(b,a,c){if(b instanceof ZmContact){b.setAttr(a,c)\n}else{b._attrs[a]=c\n}};\nZmContact.isInTrash=function(a){var b=(a instanceof ZmContact)?a.folderId:a.l;\nvar c=appCtxt.getById(b);\nreturn(c&&c.isInTrash())\n};\nZmContact.prototype.load=function(g,b,a,d){var f={GetContactsRequest:{_jsns:\"urn:zimbraMail\"}};\nif(d){f.GetContactsRequest.derefGroupMember=\"1\"\n}f.GetContactsRequest.returnCertInfo=\"1\";\nvar c=f.GetContactsRequest;\nc.cn=[{id:this.id}];\nvar e=new AjxCallback(this,this._handleLoadResponse,[g]);\nif(a){var f={GetContactsRequest:{_jsns:\"urn:zimbraMail\"}};\nif(d){f.GetContactsRequest.derefGroupMember=\"1\"\n}f.GetContactsRequest.returnCertInfo=\"1\";\nf.GetContactsRequest.cn={id:this.id};\na.addRequestParams(f,e,b)\n}else{appCtxt.getAppController().sendRequest({jsonObj:f,asyncMode:true,callback:e,errorCallback:b})\n}};\nZmContact.prototype._handleLoadResponse=function(h,j){var a=j.getResponse().GetContactsResponse;\nvar d=a.cn[0];\nthis.attr=d._attrs;\nif(d.m){for(var c=0;\nc<d.m.length;\nc++){var b=d.m[c];\nvar g=false;\nif(b.type==ZmContact.GROUP_GAL_REF){g=true\n}if(b.cn&&b.cn.length>0){var f=b.cn[0];\nf.ref=f.ref||(g&&b.value);\nvar e=ZmContact.createFromDom(f,{list:this.list,isGal:g});\ne.isDL=g&&e.attr[ZmContact.F_type]==\"group\";\nappCtxt.cacheSet(b.value,e)\n}}this._loadFromDom(d)\n}this.isLoaded=true;\nif(h){h.run(d,this)\n}};\nZmContact.prototype.clear=function(){};\nZmContact.prototype.isEmpty=function(){for(var a in this.attr){return false\n}return true\n};\nZmContact.prototype.isShared=function(){return this.addrbook&&this.addrbook.link\n};\nZmContact.prototype.isReadOnly=function(){if(this.isGal){return true\n}return this.isShared()?this.addrbook&&this.addrbook.isReadOnly():false\n};\nZmContact.prototype.isLocked=function(){if(!this.isDistributionList()){return this.isReadOnly()\n}if(!this.dlInfo){return false\n}var a=this.dlInfo;\nif(a.isOwner){return false\n}if(a.isMember){return a.unsubscriptionPolicy==ZmContactSplitView.SUBSCRIPTION_POLICY_REJECT\n}return a.subscriptionPolicy==ZmContactSplitView.SUBSCRIPTION_POLICY_REJECT\n};\nZmContact.prototype.isGroup=function(){return this.getAttr(ZmContact.F_type)==\"group\"||this.type==ZmItem.GROUP\n};\nZmContact.prototype.isDistributionList=function(){return this.isGal&&this.isGroup()\n};\nZmContact.prototype.getGroupMembers=function(){var c=this.getAllGroupMembers();\nvar b=[];\nfor(var a=0;\na<c.length;\na++){b.push(c[a].toString())\n}return AjxEmailAddress.parseEmailString(b.join(\", \"))\n};\nZmContact.prototype.getAllGroupMembers=function(){if(this.isDistributionList()){return this.dlMembers\n}var e=[];\nvar b=this.attr[ZmContact.F_groups];\nif(!b){return AjxEmailAddress.parseEmailString(this.attr[ZmContact.F_email])\n}for(var c=0;\nc<b.length;\nc++){var h=b[c];\nvar d=h.type;\nvar f=h.value;\nif(d==ZmContact.GROUP_INLINE_REF){e.push(ZmContactsHelper._wrapInlineContact(f))\n}else{var a=ZmContact.getContactFromCache(f);\nif(!a){continue\n}var g=ZmContactsHelper._wrapContact(a);\nif(g&&d===ZmContact.GROUP_CONTACT_REF){g.groupRefValue=f\n}if(g){e.push(g)\n}}}return e\n};\nZmContact.prototype.gatherExtraDlStuff=function(b){if(this.dlInfo&&!this.dlInfo.isMinimal){this.loadDlMembers(b);\nreturn\n}var a=this._handleGetDlInfoResponse.bind(this,b);\nthis.loadDlInfo(a)\n};\nZmContact.prototype._handleGetDlInfoResponse=function(h,b){var d=b._data.GetDistributionListResponse;\nvar f=d.dl[0];\nvar e=f._attrs;\nvar g=f.isMember;\nvar c=f.isOwner;\nvar a=[];\nthis.dlInfo={isMember:g,isOwner:c,subscriptionPolicy:e.zimbraDistributionListSubscriptionPolicy,unsubscriptionPolicy:e.zimbraDistributionListUnsubscriptionPolicy,description:e.description||\"\",displayName:e.displayName||\"\",notes:e.zimbraNotes||\"\",hideInGal:e.zimbraHideInGal==\"TRUE\",mailPolicy:c&&this._getMailPolicy(f,a),owners:c&&this._getOwners(f)};\nthis.dlInfo.mailPolicySpecificMailers=a;\nthis.loadDlMembers(h)\n};\nZmContact.prototype.loadDlMembers=function(b){if((!appCtxt.get(\"EXPAND_DL_ENABLED\")||this.dlInfo.hideInGal)&&!this.dlInfo.isOwner){this.dlMembers=[];\nif(b){b()\n}return\n}if(this.dlMembers){if(b){b()\n}return\n}var a=this._handleGetDlMembersResponse.bind(this,b);\nthis.getAllDLMembers(a)\n};\nZmContact.prototype._handleGetDlMembersResponse=function(e,a){var d=a.list;\nif(!d){this.dlMembers=[];\ne();\nreturn\n}var b=[];\nfor(var c=0;\nc<d.length;\nc++){b.push({type:ZmContact.GROUP_INLINE_REF,value:d[c],address:d[c]})\n}this.dlMembers=b;\ne()\n};\nZmContact.prototype._getOwners=function(b){var d=b.owners[0].owner;\nvar e=[];\nfor(var c=0;\nc<d.length;\nc++){var a=d[c].name;\ne.push(a)\n}return e\n};\nZmContact.prototype._getMailPolicy=function(c,b){var h;\nvar g=c.rights[0].right;\nvar e=g[0];\nvar f=e.grantee;\nif(!f){return ZmGroupView.MAIL_POLICY_ANYONE\n}for(var d=0;\nd<f.length;\nd++){var a=f[d];\nh=ZmGroupView.GRANTEE_TYPE_TO_MAIL_POLICY_MAP[a.type];\nif(h==ZmGroupView.MAIL_POLICY_SPECIFIC){b.push(a.name)\n}else{if(h==ZmGroupView.MAIL_POLICY_ANYONE){break\n}else{if(h==ZmGroupView.MAIL_POLICY_INTERNAL){break\n}else{if(h==ZmGroupView.MAIL_POLICY_MEMBERS){if(a.name==this.getEmail()){break\n}else{b.push(a.name);\nh=ZmGroupView.MAIL_POLICY_SPECIFIC\n}}}}}}h=h||ZmGroupView.MAIL_POLICY_ANYONE;\nreturn h\n};\nZmContact.prototype.loadDlInfo=function(c){var b=AjxSoapDoc.create(\"GetDistributionListRequest\",\"urn:zimbraAccount\",null);\nb.setMethodAttribute(\"needOwners\",\"1\");\nb.setMethodAttribute(\"needRights\",\"sendToDistList\");\nvar a=b.set(\"dl\",this.getEmail());\na.setAttribute(\"by\",\"name\");\nappCtxt.getAppController().sendRequest({soapDoc:b,asyncMode:true,callback:c})\n};\nZmContact.prototype.toggleSubscription=function(c){var b=AjxSoapDoc.create(\"SubscribeDistributionListRequest\",\"urn:zimbraAccount\",null);\nb.setMethodAttribute(\"op\",this.dlInfo.isMember?\"unsubscribe\":\"subscribe\");\nvar a=b.set(\"dl\",this.getEmail());\na.setAttribute(\"by\",\"name\");\nappCtxt.getAppController().sendRequest({soapDoc:b,asyncMode:true,callback:c})\n};\nZmContact.prototype.getId=function(a){if(a){return this.isShared()?this.id:appCtxt.accountList.mainAccount.id+\":\"+this.id\n}return this.id\n};\nZmContact.prototype.getIcon=function(a){if(this.isDistributionList()){return\"DistributionList\"\n}if(this.isGal){return\"GALContact\"\n}if(this.isShared()||(a&&a.link)){return\"SharedContact\"\n}if(this.isGroup()){return\"Group\"\n}return\"Contact\"\n};\nZmContact.prototype.getIconLarge=function(){if(this.isDistributionList()){return\"Group_48\"\n}return\"Person_48\"\n};\nZmContact.prototype.getFolderId=function(){return this.isShared()?this.folderId.split(\":\")[0]:this.folderId\n};\nZmContact.prototype.getAttr=function(a){var b=this.attr[a];\nreturn b?((b instanceof Array)?b[0]:b):\"\"\n};\nZmContact.prototype.setAttr=function(a,b){this.attr[a]=b\n};\nZmContact.prototype.setParticipantStatus=function(a){this.participantStatus=a\n};\nZmContact.prototype.getParticipantStatus=function(){return this.participantStatus\n};\nZmContact.prototype.setParticipantRole=function(a){this.participantRole=a\n};\nZmContact.prototype.getParticipantRole=function(){return this.participantRole\n};\nZmContact.prototype.removeAttr=function(a){delete this.attr[a]\n};\nZmContact.prototype.getAttrs=function(c){var b=this.attr;\nif(c){b={};\nfor(var a in this.attr){var d=ZmContact.getPrefix(a);\nif(d===c){b[a]=this.attr[a]\n}}}return b\n};\nZmContact.prototype.getNormalizedAttrs=function(a){return ZmContact.getNormalizedAttrs(this.attr,a,ZmContact.IGNORE_NORMALIZATION)\n};\nZmContact.prototype.create=function(g,e,c){if(this.isDistributionList()){this._createDl(g);\nreturn\n}var j={CreateContactRequest:{_jsns:\"urn:zimbraMail\"}};\nvar f=j.CreateContactRequest;\nvar h=f.cn={};\nvar d=g[ZmContact.F_folderId]||ZmFolder.ID_CONTACTS;\nvar b=appCtxt.getById(d);\nif(b&&b.isRemote()){d=b.getRemoteId()\n}h.l=d;\nh.a=[];\nh.m=[];\nfor(var a in g){if(a==ZmContact.F_folderId||a==\"objectClass\"||a==\"zimbraId\"||a==\"createTimeStamp\"||a==\"modifyTimeStamp\"){continue\n}if(a==ZmContact.F_groups){this._addContactGroupAttr(h,g)\n}else{this._addRequestAttr(h,a,g[a])\n}}this._addRequestAttr(h,ZmContact.X_fullName,ZmContact.computeFileAs(g));\nvar i=new AjxCallback(this,this._handleResponseCreate,[g,e!=null,c]);\nif(e){e.addRequestParams(j,i)\n}else{appCtxt.getAppController().sendRequest({jsonObj:j,asyncMode:true,callback:i})\n}};\nZmContact.prototype._handleResponseCreate=function(i,d,c,k){if(d){return\n}var f=k.getResponse().CreateContactResponse;\ncn=f?f.cn[0]:null;\nvar b=cn?cn.id:null;\nif(b){this._fileAs=null;\nthis._fullName=null;\nthis.id=b;\nthis.modified=cn.md;\nthis.folderId=cn.l||ZmOrganizer.ID_ADDRBOOK;\nfor(var j in i){if(!(i[j]==undefined||i[j]==\"\")){this.setAttr(j,i[j])\n}}var h=cn?cn.m:null;\nif(h){this.attr[ZmContact.F_groups]=h;\ncn._attrs[ZmContact.F_groups]=h\n}if(!c){var e=this.isGroup()?ZmMsg.groupCreated:ZmMsg.contactCreated;\nappCtxt.getAppController().setStatusMsg(e)\n}appCtxt.getApp(ZmApp.CONTACTS).getContactList().add(cn)\n}else{var e=this.isGroup()?ZmMsg.errorCreateGroup:ZmMsg.errorCreateContact;\nvar g=ZmMsg.errorTryAgain+\"\\n\"+ZmMsg.errorContact;\nappCtxt.getAppController().setStatusMsg(e,ZmStatusView.LEVEL_CRITICAL,g)\n}};\nZmContact.prototype.createFromVCard=function(b,a){var e={CreateContactRequest:{_jsns:\"urn:zimbraMail\"}};\nvar d=e.CreateContactRequest.cn={l:ZmFolder.ID_CONTACTS};\nd.vcard={mid:b,part:a};\nvar c={jsonObj:e,asyncMode:true,callback:(new AjxCallback(this,this._handleResponseCreateVCard)),errorCallback:(new AjxCallback(this,this._handleErrorCreateVCard))};\nappCtxt.getAppController().sendRequest(c)\n};\nZmContact.prototype._handleResponseCreateVCard=function(a){appCtxt.getAppController().setStatusMsg(ZmMsg.contactCreated)\n};\nZmContact.prototype._handleErrorCreateVCard=function(a){appCtxt.getAppController().setStatusMsg(ZmMsg.errorCreateContact,ZmStatusView.LEVEL_CRITICAL)\n};\nZmContact.prototype.modify=function(h,n,j,c){if(this.isDistributionList()){this._modifyDl(h);\nreturn\n}if(this.list.isGal){return\n}var p={ModifyContactRequest:{_jsns:\"urn:zimbraMail\",replace:\"0\",force:\"1\"}};\nvar l=p.ModifyContactRequest.cn={id:this.id};\nl.a=[];\nl.m=[];\nvar b=false;\nfor(var a in h){if(a==ZmContact.F_folderId){continue\n}if(a==ZmContact.F_groups){this._addContactGroupAttr(l,h)\n}else{this._addRequestAttr(l,a,(h[a]&&h[a].value)||h[a])\n}b=true\n}if(ZmContact.F_firstName in h||ZmContact.F_lastName in h||ZmContact.F_company in h||ZmContact.X_fileAs in h){var g={};\nvar f=[ZmContact.F_firstName,ZmContact.F_lastName,ZmContact.F_company,ZmContact.X_fileAs];\nfor(var e=0;\ne<f.length;\ne++){var k=f[e];\nvar m=h[k];\ng[k]=m!=null?m:this.getAttr(k)\n}var d=ZmContact.computeFileAs(g);\nthis._addRequestAttr(l,ZmContact.X_fullName,d)\n}if(b){if(c){c.addRequestParams(p,null,null)\n}else{var o=this._handleResponseModify.bind(this,h,n,j);\nappCtxt.getAppController().sendRequest({jsonObj:p,asyncMode:true,callback:o})\n}}else{if(h[ZmContact.F_folderId]){this._setFolder(h[ZmContact.F_folderId])\n}}};\nZmContact.prototype._createDl=function(a){this.attr=a;\nvar c=this._getCreateDlReq(a);\nvar b=[];\nthis._addMemberModsReqs(b,a);\nthis._addMailPolicyAndOwnersReqs(b,a);\nvar e={BatchRequest:{_jsns:\"urn:zimbra\",CreateDistributionListRequest:c,DistributionListActionRequest:b}};\nvar d=this._createDlResponseHandler.bind(this);\nappCtxt.getAppController().sendRequest({jsonObj:e,asyncMode:true,callback:d})\n};\nZmContact.prototype._addMailPolicyAndOwnersReqs=function(b,a){var d=a[ZmContact.F_dlMailPolicy];\nif(d){b.push(this._getSetMailPolicyReq(d,a[ZmContact.F_dlMailPolicySpecificMailers]))\n}var c=a[ZmContact.F_dlListOwners];\nif(c){b.push(this._getSetOwnersReq(c))\n}};\nZmContact.prototype._addMemberModsReqs=function(c,b){var a=b[ZmContact.F_groups];\nvar h=[];\nvar g=[];\nif(a){for(var f=0;\nf<a.length;\nf++){var e=a[f];\nvar d=(e.op==\"+\"?h:g);\nd.push(e)\n}}if(h.length>0){c.push(this._getAddOrRemoveReq(h,true))\n}if(g.length>0){c.push(this._getAddOrRemoveReq(g,false))\n}};\nZmContact.prototype._modifyDl=function(b){var f=[];\nvar j=b[ZmContact.F_email];\nvar e=false;\nif(j!==undefined){e=true;\nf.push(this._getRenameDlReq(j));\nthis.setAttr(ZmContact.F_email,j)\n}var i=this._getModifyDlAttributesReq(b);\nif(i){f.push(i)\n}var c=b[ZmContact.F_dlDisplayName];\nif(c!==undefined){this.setAttr(ZmContact.F_dlDisplayName,c)\n}var a=this.getFileAs();\nthis._resetCachedFields();\nvar d=a!=this.getFileAs();\nthis._addMemberModsReqs(f,b);\nthis._addMailPolicyAndOwnersReqs(f,b);\nif(f.length==0){this._modifyDlResponseHandler(false,null);\nreturn\n}var h={BatchRequest:{_jsns:\"urn:zimbra\",DistributionListActionRequest:f}};\nvar g=this._modifyDlResponseHandler.bind(this,d||e);\nappCtxt.getAppController().sendRequest({jsonObj:h,asyncMode:true,callback:g})\n};\nZmContact.prototype._getAddOrRemoveReq=function(a,d){var c={_jsns:\"urn:zimbraAccount\",dl:{by:\"name\",_content:this.getEmail()},action:{op:d?\"addMembers\":\"removeMembers\",dlm:[]}};\nfor(var b=0;\nb<a.length;\nb++){var e=a[b];\nc.action.dlm.push({_content:e.email})\n}return c\n};\nZmContact.prototype._getRenameDlReq=function(a){return{_jsns:\"urn:zimbraAccount\",dl:{by:\"name\",_content:this.getEmail()},action:{op:\"rename\",newName:{_content:a}}}\n};\nZmContact.prototype._getSetOwnersReq=function(b){var c=[];\nfor(var a=0;\na<b.length;\na++){c.push({type:ZmGroupView.GRANTEE_TYPE_USER,by:\"name\",_content:b[a]})\n}return{_jsns:\"urn:zimbraAccount\",dl:{by:\"name\",_content:this.getEmail()},action:{op:\"setOwners\",owner:c}}\n};\nZmContact.prototype._getSetMailPolicyReq=function(d,a){var c=[];\nif(d==ZmGroupView.MAIL_POLICY_SPECIFIC){for(var b=0;\nb<a.length;\nb++){c.push({type:ZmGroupView.GRANTEE_TYPE_EMAIL,by:\"name\",_content:a[b]})\n}}else{if(d==ZmGroupView.MAIL_POLICY_ANYONE){c.push({type:ZmGroupView.GRANTEE_TYPE_PUBLIC})\n}else{if(d==ZmGroupView.MAIL_POLICY_INTERNAL){c.push({type:ZmGroupView.GRANTEE_TYPE_ALL})\n}else{if(d==ZmGroupView.MAIL_POLICY_MEMBERS){c.push({type:ZmGroupView.GRANTEE_TYPE_GROUP,by:\"name\",_content:this.getEmail()})\n}else{throw\"invalid mailPolicy value \"+d\n}}}}return{_jsns:\"urn:zimbraAccount\",dl:{by:\"name\",_content:this.getEmail()},action:{op:\"setRights\",right:{right:\"sendToDistList\",grantee:c}}}\n};\nZmContact.prototype._addDlAttribute=function(c,e,b,d){var a=e[b];\nif(a===undefined){return\n}c.push({n:d,_content:a})\n};\nZmContact.prototype._getDlAttributes=function(b){var a=[];\nthis._addDlAttribute(a,b,ZmContact.F_dlDisplayName,\"displayName\");\nthis._addDlAttribute(a,b,ZmContact.F_dlDesc,\"description\");\nthis._addDlAttribute(a,b,ZmContact.F_dlNotes,\"zimbraNotes\");\nthis._addDlAttribute(a,b,ZmContact.F_dlHideInGal,\"zimbraHideInGal\");\nthis._addDlAttribute(a,b,ZmContact.F_dlSubscriptionPolicy,\"zimbraDistributionListSubscriptionPolicy\");\nthis._addDlAttribute(a,b,ZmContact.F_dlUnsubscriptionPolicy,\"zimbraDistributionListUnsubscriptionPolicy\");\nreturn a\n};\nZmContact.prototype._getCreateDlReq=function(a){return{_jsns:\"urn:zimbraAccount\",name:a[ZmContact.F_email],a:this._getDlAttributes(a),dynamic:false}\n};\nZmContact.prototype._getModifyDlAttributesReq=function(a){var b=this._getDlAttributes(a);\nif(b.length==0){return null\n}return{_jsns:\"urn:zimbraAccount\",dl:{by:\"name\",_content:this.getEmail()},action:{op:\"modify\",a:b}}\n};\nZmContact.prototype._modifyDlResponseHandler=function(c,a){if(this._handleErrorDl(a)){return\n}appCtxt.setStatusMsg(ZmMsg.dlSaved);\nthis.clearDlInfo();\nvar b={fileAsChanged:c};\nthis._popView(c);\nthis._notify(ZmEvent.E_MODIFY,b)\n};\nZmContact.prototype._createDlResponseHandler=function(a){if(this._handleErrorDl(a,true)){this.attr={};\nreturn\n}appCtxt.setStatusMsg(ZmMsg.distributionListCreated);\nthis._popView(true)\n};\nZmContact.prototype._popView=function(b){var a=AjxDispatcher.run(\"GetContactController\");\na.popView(true);\nif(!b){return\n}var c=AjxDispatcher.run(\"GetContactListController\");\nif(c.getFolderId()!=ZmFolder.ID_DLS){return\n}ZmAddrBookTreeController.dlFolderClicked()\n};\nZmContact.prototype._handleErrorDl=function(b,a){if(!b){return false\n}var f=b.getResponse().BatchResponse;\nvar d=f.Fault;\nif(!d){return false\n}var e=ZmCsfeCommand.faultToEx(d[0]);\nvar c=AjxDispatcher.run(\"GetContactController\");\nc.popupErrorDialog(a?ZmMsg.dlCreateFailed:ZmMsg.dlModifyFailed,e);\nreturn true\n};\nZmContact.prototype.clearDlInfo=function(){this.dlMembers=null;\nthis.dlInfo=null;\nvar a=appCtxt.getApp(ZmApp.CONTACTS);\na.cacheDL(this.getEmail(),null);\nappCtxt.cacheRemove(this.getId())\n};\nZmContact.prototype._handleResponseModify=function(e,h,f,i){var b=i.getResponse().ModifyContactResponse;\nvar g=b?b.cn[0]:null;\nvar a=g?g.id:null;\nvar d=g?g.m:null;\nif(d){this.attr[ZmContact.F_groups]=d;\ng._attrs[ZmContact.F_groups]=d\n}if(a&&a==this.id){if(!f){appCtxt.setStatusMsg(this.isGroup()?ZmMsg.groupSaved:ZmMsg.contactSaved)\n}if(e[ZmContact.F_folderId]&&this.folderId!=e[ZmContact.F_folderId]){this._setFolder(e[ZmContact.F_folderId])\n}appCtxt.getApp(ZmApp.CONTACTS).updateIdHash(g,false)\n}else{var c=ZmMsg.errorTryAgain+\"\\n\"+ZmMsg.errorContact;\nappCtxt.getAppController().setStatusMsg(ZmMsg.errorModifyContact,ZmStatusView.LEVEL_CRITICAL,c)\n}};\nZmContact.prototype._handleResponseMove=function(a,d){var c=a&&appCtxt.getById(a);\nvar b=1;\nif(c){appCtxt.setStatusMsg(ZmList.getActionSummary({actionTextKey:\"actionMove\",numItems:b,type:ZmItem.CONTACT,actionArg:c.name}))\n}this._notify(ZmEvent.E_MODIFY,d)\n};\nZmContact.prototype._setFolder=function(c){var d=appCtxt.getById(this.folderId);\nvar a=d?d.nId:null;\nif(a==c){return\n}var e=appCtxt.getById(c);\nif(this.isShared()||(e&&e.link)){if(this.list){this.list.moveItems({items:[this],folder:e})\n}}else{var g={ContactActionRequest:{_jsns:\"urn:zimbraMail\"}};\ng.ContactActionRequest.action={id:this.id,op:\"move\",l:c};\nvar f=new AjxCallback(this,this._handleResponseMove,[c]);\nvar b=appCtxt.multiAccounts&&appCtxt.accountList.mainAccount.name;\nappCtxt.getAppController().sendRequest({jsonObj:g,asyncMode:true,callback:f,accountName:b})\n}};\nZmContact.prototype.notifyModify=function(h,d){var m=ZmItem.prototype.notifyModify.apply(this,arguments);\nvar e=window.parentAppCtxt||window.appCtxt;\ne.clearAutocompleteCache(ZmAutocomplete.AC_TYPE_CONTACT);\nif(m){return m\n}var g=this.getFileAs();\nvar k=this.getFullName();\nthis._resetCachedFields();\nvar f={};\nif(h._attrs){var c=this.getAttrs();\nfor(var l in c){f[l]=c[l];\nif(h._attrs[l]==null){this.removeAttr(l)\n}}for(var l in h._attrs){this.setAttr(l,h._attrs[l])\n}if(h.m){this.setAttr(ZmContact.F_groups,h.m)\n}}var b={attr:h._attrs,oldAttr:f,fullNameChanged:(this.getFullName()!=k),fileAsChanged:(this.getFileAs()!=g),contact:this};\nfor(var i in this._list){var j=i&&appCtxt.getById(i);\nif(!j){continue\n}j.modifyLocal(h,b)\n}this._notify(ZmEvent.E_MODIFY,h)\n};\nZmContact.prototype.notifyDelete=function(){ZmItem.prototype.notifyDelete.call(this);\nvar a=window.parentAppCtxt||window.appCtxt;\na.clearAutocompleteCache(ZmAutocomplete.AC_TYPE_CONTACT)\n};\nZmContact.prototype.initFromEmail=function(a,b){if(a instanceof AjxEmailAddress){this.setAttr(ZmContact.F_email,a.getAddress());\nthis._initFullName(a,b)\n}else{this.setAttr(ZmContact.F_email,a)\n}};\nZmContact.prototype.initFromPhone=function(a,b){this.setAttr(b||ZmContact.F_companyPhone,a)\n};\nZmContact.prototype.getEmail=function(b){var a=(this.getAttr(ZmContact.F_email)||this.getAttr(ZmContact.F_workEmail1)||this.getAttr(ZmContact.F_email2)||this.getAttr(ZmContact.F_workEmail2)||this.getAttr(ZmContact.F_email3)||this.getAttr(ZmContact.F_workEmail3));\nif(b){a=AjxEmailAddress.parse(a);\nif(a){a.isGroup=this.isGroup();\na.canExpand=this.canExpand\n}}return a\n};\nZmContact.prototype.getPhone=function(){var a=(this.getAttr(ZmContact.F_mobilePhone)||this.getAttr(ZmContact.F_workPhone)||this.getAttr(ZmContact.F_homePhone)||this.getAttr(ZmContact.F_otherPhone));\nreturn a\n};\nZmContact.prototype.getLookupEmail=function(b){var a=this._lookupEmail;\nif(b&&a){a=AjxEmailAddress.parse(a);\na.isGroup=this.isGroup();\na.canExpand=this.canExpand\n}return a\n};\nZmContact.prototype.getEmails=function(){var f=[];\nvar c=this.getAttrs();\nfor(var b=0;\nb<ZmContact.EMAIL_FIELDS.length;\nb++){var e=ZmContact.EMAIL_FIELDS[b];\nfor(var d=1;\ntrue;\nd++){var a=ZmContact.getAttributeName(e,d);\nif(!c[a]){break\n}f.push(c[a])\n}}return f\n};\nZmContact.prototype.getFullName=function(a){var b=null;\nif(!this._fullName||a){var c=this.getAttr(ZmContact.X_fullName);\nif(c){this._fullName=(c instanceof Array)?c[0]:c\n}else{this._fullName=this.getFullNameForDisplay(false)\n}if(a){b=this.getFullNameForDisplay(a)\n}}if(!this._fullName){this._fullName=this.getFileAs()\n}return b||this._fullName\n};\nZmContact.prototype.getFullNameForDisplay=function(d){if(this.isDistributionList()){return this.getAttr(ZmContact.F_dlDisplayName)||this.getAttr(\"fullName\")\n}var e=this.getAttr(ZmContact.F_namePrefix);\nvar c=this.getAttr(ZmContact.F_firstName);\nvar k=this.getAttr(ZmContact.F_middleName);\nvar b=this.getAttr(ZmContact.F_maidenName);\nvar i=this.getAttr(ZmContact.F_lastName);\nvar j=this.getAttr(ZmContact.F_nameSuffix);\nvar g=ZmMsg.fullname;\nif(j){g=b?ZmMsg.fullnameMaidenSuffix:ZmMsg.fullnameSuffix\n}else{if(b){g=ZmMsg.fullnameMaiden\n}}if(appCtxt.get(ZmSetting.LOCALE_NAME)===\"ja\"){var a=this.getAttr(ZmContact.F_fileAs);\nif(!AjxUtil.isEmpty(a)&&a!==\"1\"&&a!==\"4\"&&a!==\"6\"&&a.slice(0,1)!==\"8\"){g=\"{0} {1} {2} {4}\"\n}}var h=new AjxMessageFormat(g);\nvar f=[e,c,k,b,i,j];\nif(!d){return AjxStringUtil.trim(h.format(f),true)\n}return this._getFullNameHtml(h,f)\n};\nZmContact.prototype._getFullNameHtml=function(j,c){var h=[];\nvar e=j.getSegments();\nfor(var d=0;\nd<e.length;\nd++){var f=e[d];\nif(f instanceof AjxFormat.TextSegment){h.push(f.format());\ncontinue\n}var g=f.getIndex();\nvar b=c[g];\nvar k=ZmContact.__RUBY_FIELDS[g]&&this.getAttr(ZmContact.__RUBY_FIELDS[g]);\nh.push(AjxStringUtil.htmlRubyEncode(b,k))\n}return h.join(\"\")\n};\nZmContact.__RUBY_FIELDS=[null,ZmContact.F_phoneticFirstName,null,null,ZmContact.F_phoneticLastName,null];\nZmContact.prototype.getToolTip=function(a,d,c){var b={contact:this,entryTitle:this.getFileAs(),hint:c};\nreturn(AjxTemplate.expand(\"abook.Contacts#Tooltip\",b))\n};\nZmContact.prototype.getFileAs=function(a){if(!this._fileAs){this._fileAs=ZmContact.computeFileAs(this);\nthis._fileAsLC=this._fileAs?this._fileAs.toLowerCase():null\n}if(a&&!this._fileAsLC){this._fileAsLC=this._fileAs.toLowerCase()\n}return a?this._fileAsLC:this._fileAs\n};\nZmContact.prototype.getFileAsNoName=function(){return[ZmMsg.noName,this.getEmail()].join(\" \")\n};\nZmContact.prototype.getHeader=function(){return this.id?this.getFileAs():ZmMsg.newContact\n};\nZmContact.NO_MAX_IMAGE_WIDTH=ZmContact.NO_MAX_IMAGE_HEIGHT=-1;\nZmContact.prototype.getImageUrl=function(e,d){var f=this.getAttr(ZmContact.F_image);\nvar c=f&&f.part||this.getAttr(ZmContact.F_imagepart);\nif(!c){return this.getAttr(ZmContact.F_zimletImage)\n}var g=appCtxt.get(ZmSetting.CSFE_MSG_FETCHER_URI);\nvar b=\"\";\nif(e!==ZmContact.NO_MAX_IMAGE_WIDTH){e=e||48;\nb=[\"&max_width=\",e].join(\"\")\n}var a=\"\";\nif(d!==ZmContact.NO_MAX_IMAGE_HEIGHT){d=d||(e!==ZmContact.NO_MAX_IMAGE_WIDTH?e:48);\na=[\"&max_height=\",d].join(\"\")\n}return[g,\"&id=\",this.id,\"&part=\",c,b,a,\"&t=\",(new Date()).getTime()].join(\"\")\n};\nZmContact.prototype.addModifyZimletImageToBatch=function(b,c){var a={};\nif(this.getAttr(ZmContact.F_zimletImage)===c){return\n}a[ZmContact.F_zimletImage]=c;\nb.add(this.modify.bind(this,a,null,true))\n};\nZmContact.prototype.getCompanyField=function(){var b=this.getAttrs();\nif(b==null){return null\n}var c=parseInt(b.fileAs);\nvar d=[];\nvar a=0;\nif(c==ZmContact.FA_LAST_C_FIRST||c==ZmContact.FA_FIRST_LAST){if(b.jobTitle){d[a++]=b.jobTitle;\nif(b.company){d[a++]=\", \"\n}}if(b.company){d[a++]=b.company\n}}else{if(c==ZmContact.FA_COMPANY){if(b.lastName){d[a++]=b.lastName;\nif(b.firstName){d[a++]=\", \"\n}}if(b.firstName){d[a++]=b.firstName\n}if(b.jobTitle){d[a++]=\" (\"+b.jobTitle+\")\"\n}}else{if(b.jobTitle){d[a++]=b.jobTitle;\nif(b.company&&(b.fileAs==null||c==ZmContact.FA_LAST_C_FIRST||c==ZmContact.FA_FIRST_LAST)){d[a++]=\", \"\n}}if(b.company&&(b.fileAs==null||c==ZmContact.FA_LAST_C_FIRST||c==ZmContact.FA_FIRST_LAST)){d[a++]=b.company\n}}}if(d.length==0){return null\n}return d.join(\"\")\n};\nZmContact.prototype.getWorkAddrField=function(a){var b=this.getAttrs();\nreturn this._getAddressField(b.workStreet,b.workCity,b.workState,b.workPostalCode,b.workCountry)\n};\nZmContact.prototype.getHomeAddrField=function(a){var b=this.getAttrs();\nreturn this._getAddressField(b.homeStreet,b.homeCity,b.homeState,b.homePostalCode,b.homeCountry)\n};\nZmContact.prototype.getOtherAddrField=function(a){var b=this.getAttrs();\nreturn this._getAddressField(b.otherStreet,b.otherCity,b.otherState,b.otherPostalCode,b.otherCountry)\n};\nZmContact.prototype.getAddressBook=function(){if(!this.addrbook){this.addrbook=appCtxt.getById(this.folderId)\n}return this.addrbook\n};\nZmContact.prototype._getAddressField=function(g,f,d,c,e){if(g==null&&f==null&&d==null&&c==null&&e==null){return null\n}var b=[];\nvar a=0;\nif(g){b[a++]=g;\nif(f||d||c){b[a++]=\"\\n\"\n}}if(f){b[a++]=f;\nif(d){b[a++]=\", \"\n}else{if(c){b[a++]=\" \"\n}}}if(d){b[a++]=d;\nif(c){b[a++]=\" \"\n}}if(c){b[a++]=c\n}if(e){b[a++]=\"\\n\"+e\n}return b.join(\"\")\n};\nZmContact.prototype._initFullName=function(b,d){var a=b.getName();\na=AjxStringUtil.trim(a.replace(AjxEmailAddress.commentPat,\"\"));\nif(a&&a.length){this._setFullName(a,[\" \"])\n}else{if(!d){a=b.getAddress();\nif(a&&a.length){var c=a.indexOf(\"@\");\nif(c==-1){return\n}a=a.substr(0,c);\nthis._setFullName(a,[\".\",\"_\"])\n}}}};\nZmContact.prototype._setFullName=function(f,e){var d=e[0];\nfor(var a=0;\na<e.length;\na++){if(f.indexOf(e[a])!=-1){d=e[a];\nbreak\n}}var c=f.split(d);\nvar b=this[\"__setFullName_\"+AjxEnv.DEFAULT_LOCALE]||this.__setFullName;\nb.call(this,c,f,e)\n};\nZmContact.prototype.__setFullName=function(a,c,b){this.setAttr(ZmContact.F_firstName,a[0]);\nif(a.length==2){this.setAttr(ZmContact.F_lastName,a[1])\n}else{if(a.length==3){this.setAttr(ZmContact.F_middleName,a[1]);\nthis.setAttr(ZmContact.F_lastName,a[2])\n}}};\nZmContact.prototype.__setFullName_ja=function(a,c,b){if(a.length>2){this.__setFullName(a,c,b);\nreturn\n}this.setAttr(ZmContact.F_lastName,a[0]);\nif(a.length>1){this.setAttr(ZmContact.F_firstName,a[1])\n}};\nZmContact.prototype.__setFullName_ja_JP=ZmContact.prototype.__setFullName_ja;\nZmContact.prototype._addRequestAttr=function(e,c,d){var b={n:c};\nif(c==ZmContact.F_image&&AjxUtil.isString(d)&&d.length){if(d.indexOf(\"aid_\")!=-1){b.aid=d.substring(4)\n}else{b.part=d.substring(5)\n}}else{b._content=d||\"\"\n}if(d instanceof Array){if(!e._attrs){e._attrs={}\n}e._attrs[c]=d||\"\"\n}else{if(!e.a){e.a=[]\n}e.a.push(b)\n}};\nZmContact.prototype._addContactGroupAttr=function(f,d){var b=d[ZmContact.F_groups];\nfor(var c=0;\nc<b.length;\nc++){var e=b[c];\nif(!f.m){f.m=[]\n}var a={type:e.type,value:e.value};\nif(e.op){a.op=e.op\n}f.m.push(a)\n}};\nZmContact.prototype._resetCachedFields=function(){this._fileAs=this._fileAsLC=this._fullName=null\n};\nZmContact.prototype._loadFromDom=function(d){this.isLoaded=true;\nthis.rev=d.rev;\nthis.sf=d.sf||d._attrs.sf;\nif(!this.isGal){this.folderId=d.l\n}this.created=d.cd;\nthis.modified=d.md;\nthis.attr=d._attrs||{};\nif(d.m){this.attr[ZmContact.F_groups]=d.m\n}this.ref=d.ref||this.attr.dn;\nif(d.email){this.attr[ZmContact.F_email]=d.email\n}if(d.email2){this.attr[ZmContact.F_email2]=d.email2\n}if(d.email3){this.attr[ZmContact.F_email3]=d.email3\n}this.attr=ZmContact.mapAttrs(this.attr);\nvar a=this.attr[ZmContact.F_groups];\nif(!a||(a instanceof Array&&a.length==0)){this.type=ZmItem.CONTACT\n}else{this.type=ZmItem.GROUP\n}var c=window.parentAppCtxt||window.appCtxt;\nthis.addrbook=c.getById(this.folderId);\nthis._parseTagNames(d.tn);\nif(!this.isShared()){this._parseFlags(d.f)\n}else{this.isLoaded=false\n}this._fileAs=ZmContact.computeFileAs(this);\nthis.isDL=this.isDistributionList();\nif(this.isDL){this.dlInfo={isMinimal:true,isMember:d.isMember,isOwner:d.isOwner,subscriptionPolicy:this.attr.zimbraDistributionListSubscriptionPolicy,unsubscriptionPolicy:this.attr.zimbraDistributionListUnsubscriptionPolicy,displayName:d.d||\"\",hideInGal:this.attr.zimbraHideInGal==\"TRUE\"};\nthis.canExpand=d.exp!==false;\nvar e=this.getEmails();\nvar c=window.parentAppCtxt||window.appCtxt;\nfor(var b=0;\nb<e.length;\nb++){c.setIsExpandableDL(e[b],this.canExpand)\n}}if(d.certificate){this.certificate=d.certificate\n}};\nZmContact.prototype.getAttendeeText=function(c,b){var a=this.getEmail(true);\nreturn(a?a.toString(b||(c&&c!=ZmCalBaseItem.PERSON)):\"\")\n};\nZmContact.prototype.getAttendeeKey=function(){var b=this.getLookupEmail()||this.getEmail();\nvar a=this.getFullName();\nreturn b?b:a\n};\nZmContact.prototype.getUnknownFields=function(b){var g=ZmContact.__FIELD_MAP;\nif(!g){g=ZmContact.__FIELD_MAP={};\nfor(var e=0;\ne<ZmContact.DISPLAY_FIELDS;\ne++){g[ZmContact.DISPLAY_FIELDS[e]]=true\n}}var a=[];\nvar d=this.getAttrs();\nfor(var c in d){var f=ZmContact.getPrefix(c);\nif(g[c]){continue\n}a.push(f)\n}return this.getFields(a,b)\n};\nZmContact.prototype.getFields=function(c,k){var f;\nvar h=this.getAttrs();\nfor(var d=0;\nd<c.length;\nd++){for(var b=1;\ntrue;\nb++){var e=ZmContact.getAttributeName(c[d],b);\nif(!h[e]){break\n}if(!f){f={}\n}f[e]=h[e]\n}}if(k&&f){var j=AjxUtil.keys(f);\nj.sort(k);\nvar a={};\nfor(var b=0;\nb<j;\nb++){var g=j[b];\na[g]=c[g]\n}f=a\n}return f\n};\nZmContact.prototype.getDLMembers=function(f,d,j){var m={list:[],more:false,isDL:{}};\nif(!this.isDL){return m\n}var i=this.getEmail();\nvar b=appCtxt.getApp(ZmApp.CONTACTS);\nvar g=b.getDL(i);\nif(!g){g=m;\ng.more=true;\nb.cacheDL(i,g)\n}d=d||ZmContact.DL_PAGE_SIZE;\nvar a=f||0;\nvar c=(f+d)-1;\nif(g.list.length>=c+1||!g.more){var h=g.list.slice(f,c+1);\nm={list:h,more:g.more||(g.list.length>c+1),isDL:g.isDL};\nthis._handleResponseGetDLMembers(a,d,j,m);\nreturn\n}if(!g.total||(f<g.total)){var l={GetDistributionListMembersRequest:{_jsns:\"urn:zimbraAccount\",offset:f,limit:d}};\nvar e=l.GetDistributionListMembersRequest;\ne.dl={_content:this.getEmail()};\nvar k=new AjxCallback(this,this._handleResponseGetDLMembers,[f,d,j]);\nappCtxt.getAppController().sendRequest({jsonObj:l,asyncMode:true,callback:k})\n}else{this._handleResponseGetDLMembers(a,d,j,m)\n}};\nZmContact.prototype._handleResponseGetDLMembers=function(d,b,m,n,a){if(a||!n.list){var j=[];\na=a||n.getResponse();\na=a.GetDistributionListMembersResponse;\nvar g=appCtxt.getApp(ZmApp.CONTACTS).getDL(this.getEmail());\nvar l=g.more=a.more;\nvar k={};\nvar c=a.dlm;\nif(c&&c.length){for(var f=0,h=c.length;\nf<h;\nf++){var e=c[f]._content;\nj.push(e);\ng.list[d+f]=e;\nif(c[f].isDL){k[e]=g.isDL[e]=true\n}}}g.total=a.total;\nvar n={list:j,more:l,isDL:k}\n}if(m){m.run(n)\n}else{return n\n}};\nZmContact.prototype.getAllDLMembers=function(d){var a={list:[],more:false,isDL:{}};\nif(!this.isDL){return a\n}var b=appCtxt.getApp(ZmApp.CONTACTS).getDL(this.getEmail());\nif(b&&!b.more){a={list:b.list.slice(),more:false,isDL:b.isDL};\nd.run(a);\nreturn\n}var c=new AjxCallback(this,this._getNextDLChunk,[d]);\nthis.getDLMembers(b?b.list.length:0,null,c)\n};\nZmContact.prototype._getNextDLChunk=function(d,a){var b=appCtxt.getApp(ZmApp.CONTACTS).getDL(this.getEmail());\nif(a.more){var c=new AjxCallback(this,this._getNextDLChunk,[d]);\nthis.getDLMembers(b.list.length,null,c)\n}else{a.list=b.list.slice();\nd.run(a)\n}};\nZmContact.getContactFromCache=function(c){var d=appCtxt.accountList.mainAccount.id;\nvar b=null;\nif(c&&c.indexOf(d+\":\")!=-1){var a=c.split(d+\":\");\nb=a&&a.length>1?appCtxt.cacheGet(a[1]):appCtxt.cacheGet(c)\n}else{b=appCtxt.cacheGet(c)\n}if(b instanceof ZmContact){return b\n}return null\n};\nZmContact.ATTR_VARIANTS={};\nZmContact.IGNORE_ATTR_VARIANT={};\nZmContact.IGNORE_ATTR_VARIANT[ZmContact.F_groups]=true;\nZmContact.initAttrVariants=function(k){var j=Object.keys(k),d=j.length,g,b,e,h=[];\nvar c=k.IGNORE_ATTR_VARIANT||{};\nfor(b=0;\nb<d;\nb++){g=j[b];\nif(g.indexOf(\"F_\")===0){e=k[g];\nif(!c[e]){h.push(e)\n}}}var f=/^([a-zA-Z]+)(\\d+)$/;\nh.sort(function(m,i){var n=m.match(f),l=i.match(f);\nif(n&&l&&n[1]===l[1]){return n[2]-l[2]\n}else{return m>i?1:(m<i?-1:0)\n}});\nvar e,a;\nfor(b=0;\nb<h.length;\nb++){e=h[b];\na=e.replace(/\\d+$/,\"\").toLowerCase();\nif(!ZmContact.ATTR_VARIANTS[a]){ZmContact.ATTR_VARIANTS[a]=[]\n}ZmContact.ATTR_VARIANTS[a].push(e)\n}};\nZmContact.initAttrVariants(ZmContact);\nZmContact.mapAttrs=function(d){var c,g,b,f={};\nfor(c in d){g=d[c];\nif(g){b=ZmContact.ATTR_VARIANTS[c.toLowerCase()];\nif(b){g=AjxUtil.toArray(g);\nvar a=Math.min(g.length,b.length),e;\nfor(e=0;\ne<a;\ne++){f[b[e]]=g[e]\n}}else{f[c]=g\n}}}return f\n};\nZmContact._AB_FIELD={firstName:ZmMsg.AB_FIELD_firstName,lastName:ZmMsg.AB_FIELD_lastName,middleName:ZmMsg.AB_FIELD_middleName,fullName:ZmMsg.AB_FIELD_fullName,jobTitle:ZmMsg.AB_FIELD_jobTitle,company:ZmMsg.AB_FIELD_company,department:ZmMsg.AB_FIELD_department,email:ZmMsg.AB_FIELD_email,email2:ZmMsg.AB_FIELD_email2,email3:ZmMsg.AB_FIELD_email3,imAddress1:ZmMsg.AB_FIELD_imAddress1,imAddress2:ZmMsg.AB_FIELD_imAddress2,imAddress3:ZmMsg.AB_FIELD_imAddress3,image:ZmMsg.AB_FIELD_image,attachment:ZmMsg.AB_FIELD_attachment,workStreet:ZmMsg.AB_FIELD_street,workCity:ZmMsg.AB_FIELD_city,workState:ZmMsg.AB_FIELD_state,workPostalCode:ZmMsg.AB_FIELD_postalCode,workCountry:ZmMsg.AB_FIELD_country,workURL:ZmMsg.AB_FIELD_URL,workPhone:ZmMsg.AB_FIELD_workPhone,workPhone2:ZmMsg.AB_FIELD_workPhone2,workFax:ZmMsg.AB_FIELD_workFax,assistantPhone:ZmMsg.AB_FIELD_assistantPhone,companyPhone:ZmMsg.AB_FIELD_companyPhone,callbackPhone:ZmMsg.AB_FIELD_callbackPhone,homeStreet:ZmMsg.AB_FIELD_street,homeCity:ZmMsg.AB_FIELD_city,homeState:ZmMsg.AB_FIELD_state,homePostalCode:ZmMsg.AB_FIELD_postalCode,homeCountry:ZmMsg.AB_FIELD_country,homeURL:ZmMsg.AB_FIELD_URL,homePhone:ZmMsg.AB_FIELD_homePhone,homePhone2:ZmMsg.AB_FIELD_homePhone2,homeFax:ZmMsg.AB_FIELD_homeFax,mobilePhone:ZmMsg.AB_FIELD_mobilePhone,pager:ZmMsg.AB_FIELD_pager,carPhone:ZmMsg.AB_FIELD_carPhone,otherStreet:ZmMsg.AB_FIELD_street,otherCity:ZmMsg.AB_FIELD_city,otherState:ZmMsg.AB_FIELD_state,otherPostalCode:ZmMsg.AB_FIELD_postalCode,otherCountry:ZmMsg.AB_FIELD_country,otherURL:ZmMsg.AB_FIELD_URL,otherPhone:ZmMsg.AB_FIELD_otherPhone,otherFax:ZmMsg.AB_FIELD_otherFax,notes:ZmMsg.notes,birthday:ZmMsg.AB_FIELD_birthday};\nZmContact._AB_FILE_AS={1:ZmMsg.AB_FILE_AS_lastFirst,2:ZmMsg.AB_FILE_AS_firstLast,3:ZmMsg.AB_FILE_AS_company,4:ZmMsg.AB_FILE_AS_lastFirstCompany,5:ZmMsg.AB_FILE_AS_firstLastCompany,6:ZmMsg.AB_FILE_AS_companyLastFirst,7:ZmMsg.AB_FILE_AS_companyFirstLast}\n}}if(AjxPackage.define(\"zimbraMail.abook.model.ZmContactList\")){ZmContactList=function(a,c,b){if(arguments.length==0){return\n}b=b||ZmItem.CONTACT;\nZmList.call(this,b,a);\nthis.isGal=(c===true);\nthis.isCanonical=false;\nthis.isLoaded=false;\nthis._app=appCtxt.getApp(ZmApp.CONTACTS);\nif(!this._app){this._emailToContact=this._phoneToContact={};\nreturn\n}this._emailToContact=this._app._byEmail;\nthis._phoneToContact=this._app._byPhone;\nthis._alwaysUpdateHashes=true\n};\nZmContactList.prototype=new ZmList;\nZmContactList.prototype.constructor=ZmContactList;\nZmContactList.prototype.isZmContactList=true;\nZmContactList.prototype.toString=function(){return\"ZmContactList\"\n};\nZmContactList.URL=\"/Contacts\";\nZmContactList.URL_ARGS={fmt:\"cf\",t:2,all:\"all\"};\nZmContactList.CONTACT_SPLIT_CHAR=\"\\u001E\";\nZmContactList.FIELD_SPLIT_CHAR=\"\\u001D\";\nZmContactList.IS_CONTACT_FIELD={id:true,l:true,d:true,fileAsStr:true,rev:true};\nZmContactList.prototype.addLoadedCallback=function(a){if(this.isLoaded){a.run();\nreturn\n}if(!this._loadedCallbacks){this._loadedCallbacks=[]\n}this._loadedCallbacks.push(a)\n};\nZmContactList.prototype._finishLoading=function(){this.isLoaded=true;\nif(this._loadedCallbacks){var a;\nwhile(a=this._loadedCallbacks.shift()){a.run()\n}}};\nZmContactList.prototype.load=function(f,a,c){this.isCanonical=true;\nvar e=new AjxCallback(this,this._handleResponseLoad,[f]);\nif(appCtxt.isExternalAccount()){if(f){f.run()\n}return\n}var b=ZmContactList.URL_ARGS;\nif(AjxEnv.isIE){b=AjxUtil.hashCopy(b);\nb.sid=ZmCsfeCommand.getSessionId()\n}var d={asyncMode:true,noBusyOverlay:true,callback:e,errorCallback:a,offlineCallback:f};\nd.restUri=AjxUtil.formatUrl({path:[\"/home/\",(c||appCtxt.getUsername()),ZmContactList.URL].join(\"\"),qsArgs:b,qsReset:true});\nappCtxt.getAppController().sendRequest(d);\nAjxDispatcher.addPackageLoadFunction(\"Contacts\",new AjxCallback(this,this._loadSharedFolders));\nZmContactList.addDlFolder()\n};\nZmContactList.prototype._loadSharedFolders=function(){var a=appCtxt.getById(ZmOrganizer.ID_ROOT);\nvar b=[];\nappCtxt.getSharedFolders(a,ZmOrganizer.ADDRBOOK,b);\nif(b.length){var d=\"\";\nfor(var c=0;\nc<b.length;\nc++){d+=b[c].createQuery()+\" or \"\n}d=d.replace(/\\sor\\s$/,\"\");\nvar g=appCtxt.getSearchController();\nvar e=g.getSearchFieldValue();\nvar f={query:d,searchFor:ZmItem.CONTACT,fetch:true,sortBy:ZmSearch.NAME_ASC,callback:null,noRender:true};\ng.search(f);\ng.setSearchField(e)\n}};\nZmContactList.prototype._handleResponseLoad=function(p,s){var q=s.getResponse();\nif(q&&typeof q!==\"string\"){q=q._data\n}var a=[];\nif(q){var r=q.split(ZmContactList.CONTACT_SPLIT_CHAR);\nvar g=new ZmBatchCommand(true,null,true);\nfor(var f=0,m=r.length;\nf<m;\nf++){var k=r[f].split(ZmContactList.FIELD_SPLIT_CHAR);\nvar l={},o={};\nvar h=[];\nvar c=false;\nfor(var e=0,d=k.length;\ne<d;\ne+=2){if(ZmContactList.IS_CONTACT_FIELD[k[e]]){l[k[e]]=k[e+1]\n}else{var n=k[e+1];\nswitch(k[e]){case ZmContact.F_memberC:h.push({type:ZmContact.GROUP_CONTACT_REF,value:n});\nc=true;\nbreak;\ncase ZmContact.F_memberG:h.push({type:ZmContact.GROUP_GAL_REF,value:n});\nc=true;\nbreak;\ncase ZmContact.F_memberI:h.push({type:ZmContact.GROUP_INLINE_REF,value:n});\nc=true;\nbreak;\ndefault:o[k[e]]=n\n}}}if(o[ZmContact.F_type]===\"group\"){o[ZmContact.F_groups]=h\n}if(c){var b=new ZmContact(l.id,this);\ng.add(new AjxCallback(b,b.load,[null,null,g,true]))\n}l._attrs=o;\nthis._addContact(l)\n}g.run()\n}this._finishLoading();\nif(p){p.run()\n}};\nZmContactList.addDlFolder=function(){if(!appCtxt.get(ZmSetting.DLS_FOLDER_ENABLED)){return\n}var c=appCtxt.getById(ZmOrganizer.ID_DLS);\nvar a=appCtxt.getById(ZmOrganizer.ID_ROOT);\nif(!a){return\n}if(c&&a.getById(ZmOrganizer.ID_DLS)){return\n}if(!c){var b={id:ZmOrganizer.ID_DLS,name:ZmMsg.distributionLists,parent:a,tree:a.tree,type:ZmOrganizer.ADDRBOOK,numTotal:null,noTooltip:true};\nc=new ZmAddrBook(b);\na.children.add(c);\nc._isDL=true\n}else{c.parent=a;\na.children.add(c)\n}};\nZmContactList.prototype.add=function(b,a){if(!b.id||!this._idHash[b.id]){this._vector.add(b,a);\nif(b.id){this._idHash[b.id]=b\n}this._updateHashes(b,true)\n}};\nZmContactList.prototype.cache=function(h,b){var e=function(){return this.id\n};\nvar d=function(i){return this._vector.containsLike(i,e)\n};\nvar g=b.sub(d,this);\nthis.getVector().merge(h,g);\nvar f=g.getArray();\nfor(var a=0;\na<f.length;\na++){var c=f[a];\nc.list=this;\nif(c.id){this._idHash[c.id]=c\n}}};\nZmContactList.prototype._addContact=function(a){a.list=this;\nthis._updateHashes(a,true);\nvar b=[],c=[];\nif(a._attrs[ZmContact.F_firstName]){b.push(a._attrs[ZmContact.F_firstName])\n}if(a._attrs[ZmContact.F_middleName]){b.push(a._attrs[ZmContact.F_middleName])\n}if(a._attrs[ZmContact.F_lastName]){b.push(a._attrs[ZmContact.F_lastName])\n}if(b.length){a._attrs[ZmContact.X_fullName]=b.join(\" \")\n}if(a._attrs[ZmContact.F_firstName]){c.push(a._attrs[ZmContact.F_firstName])\n}if(a._attrs[ZmContact.F_lastName]){c.push(a._attrs[ZmContact.F_lastName])\n}a._attrs[ZmContact.X_firstLast]=c.join(\" \");\nthis.add(a)\n};\nZmContactList.prototype._realizeContact=function(contact,idx){if(contact instanceof ZmContact){return contact\n}if(contact&&contact.type==ZmItem.CONTACT){return contact\n}var args={list:this};\nvar obj=eval(ZmList.ITEM_CLASS[this.type]);\nvar realContact=obj&&obj.createFromDom(contact,args);\nif(this.isCanonical){var a=this.getArray();\nidx=idx||this.getIndexById(contact.id);\na[idx]=realContact;\nthis._updateHashes(realContact,true);\nthis._idHash[contact.id]=realContact\n}return realContact\n};\nZmContactList.prototype.getIndexById=function(d){var b=this.getArray();\nfor(var c=0;\nc<b.length;\nc++){if(b[c].id==d){return c\n}}return null\n};\nZmContactList.prototype.getSubList=function(g,f,d){if(d&&this.isCanonical){var l=[];\nvar j=this.getArray();\nvar b=0;\nthis.setHasMore(false);\nfor(var h=0;\nh<j.length;\nh++){j[h]=this._realizeContact(j[h],h);\nvar c=appCtxt.getById(j[h].folderId);\nif(c&&c.nId==ZmOrganizer.normalizeId(d)){if(b>=g){if(l.length==f){this.setHasMore(true);\nbreak\n}l.push(j[h])\n}b++\n}}return AjxVector.fromArray(l)\n}else{var e=ZmList.prototype.getSubList.call(this,g,f);\nif(e){var k=e.getArray();\nfor(var h=0;\nh<k.length;\nh++){k[h]=this._realizeContact(k[h],g+h)\n}}return e\n}};\nZmContactList.prototype.getById=function(b){if(!b||!this.isCanonical){return null\n}var a=this._idHash[b];\nreturn a?this._realizeContact(a):null\n};\nZmContactList.prototype.getContactByEmail=function(b){if(!b||!this.isCanonical){return null\n}var a=this._emailToContact[b.toLowerCase()];\nif(a){a=this._realizeContact(a);\na._lookupEmail=b;\nreturn a\n}else{return null\n}};\nZmContactList.prototype.getContactByPhone=function(a){if(!a||!this.isCanonical){return null\n}var c=this._getPhoneDigits(a);\nvar b=this._phoneToContact[c];\nif(b){b.contact=this._realizeContact(b.contact);\nreturn b\n}else{return null\n}};\nZmContactList.prototype.moveItems=function(h){h=Dwt.getParams(arguments,[\"items\",\"folder\",\"attrs\",\"outOfTrash\"]);\nh.items=AjxUtil.toArray(h.items);\nvar c=new ZmBatchCommand(true,null,true);\nvar b=new ZmBatchCommand(true,null,true);\nvar f=[];\nif(h.items[0]&&h.items[0] instanceof ZmItem){for(var d=0;\nd<h.items.length;\nd++){var a=h.items[d];\nif(a.isReadOnly()){continue\n}f.push(a)\n}}else{f=h.items\n}if(f.length>0){var e=AjxUtil.hashCopy(h);\ne.attrs=h.attrs||{};\nvar g=h.folder;\ne.attrs.l=g.isRemote()?g.getRemoteId():g.id;\ne.action=\"move\";\ne.accountName=appCtxt.multiAccounts&&appCtxt.accountList.mainAccount.name;\nif(e.folder.id==ZmFolder.ID_TRASH){e.actionTextKey=\"actionTrash\";\ne.accountName=appCtxt.multiAccounts&&h.items[0].getAccount().name\n}else{e.actionTextKey=\"actionMove\";\ne.actionArg=g.getName(false,false,true)\n}e.callback=h.outOfTrash&&new AjxCallback(this,this._handleResponseMoveItems,h);\nthis._itemAction(e)\n}};\nZmContactList.prototype._handleResponseMoveBatchCmd=function(b){var e=b.getResponse().BatchResponse.ContactActionResponse;\nvar d=e[0].action.id.split(\",\");\nfor(var c=0;\nc<d.length;\nc++){var a=appCtxt.cacheGet(d[c]);\nif(a&&a.isShared()){a.notifyDelete();\nappCtxt.cacheRemove(d[c])\n}}};\nZmContactList.prototype._handleResponseLoadMove=function(b,c){var a=new AjxCallback(this,this._itemAction,[c]);\nb.add(a);\nvar d=new AjxCallback(this,this._handleResponseMoveBatchCmd);\nb.run(d)\n};\nZmContactList.prototype._handleResponseBatchLoad=function(c,d,b,a){c.add(this._getCopyCmd(a,d))\n};\nZmContactList.prototype._getCopyCmd=function(a,d){var b=new ZmContact(null,this);\nfor(var c in a.attr){b.attr[c]=a.attr[c]\n}b.attr[ZmContact.F_folderId]=d.id;\nreturn new AjxCallback(b,b.create,[b.attr])\n};\nZmContactList.prototype.deleteItems=function(a){if(this.isGal){if(ZmContactList.deleteGalItemsAllowed(a.items)){this._deleteDls(a.items);\nreturn\n}return\n}ZmList.prototype.deleteItems.call(this,a)\n};\nZmContactList.deleteGalItemsAllowed=function(b){var f=appCtxt.createDistListAllowedDomainsMap;\nif(b.length==0){return false\n}for(var d=0;\nd<b.length;\nd++){var a=b[d];\nvar c=a.getEmail();\nvar e=c.split(\"@\")[1];\nvar g=a&&a.isDistributionList();\nif(!g||!f[e]||!a.dlInfo||!a.dlInfo.isOwner){return false\n}}return true\n};\nZmContactList.prototype._deleteDls=function(e,a){if(!a){var f=this._deleteDls.bind(this,e,true);\nthis._popupDeleteWarningDialog(f,false,e.length);\nreturn\n}var g=[];\nfor(var b=0;\nb<e.length;\nb++){var c=e[b];\nvar d=c.getEmail();\ng.push({_jsns:\"urn:zimbraAccount\",dl:{by:\"name\",_content:c.getEmail()},action:{op:\"delete\"}})\n}var j={BatchRequest:{_jsns:\"urn:zimbra\",DistributionListActionRequest:g}};\nvar h=this._deleteDlsResponseHandler.bind(this,e);\nappCtxt.getAppController().sendRequest({jsonObj:j,asyncMode:true,callback:h})\n};\nZmContactList.prototype._deleteDlsResponseHandler=function(a){if(appCtxt.getCurrentView().isZmGroupView){this.controller.popView()\n}appCtxt.setStatusMsg(a.length==1?ZmMsg.dlDeleted:ZmMsg.dlsDeleted);\nfor(var b=0;\nb<a.length;\nb++){var c=a[b];\nc.clearDlInfo();\nc._notify(ZmEvent.E_DELETE)\n}};\nZmContactList.prototype.setIsGal=function(a){this.isGal=a\n};\nZmContactList.prototype.notifyCreate=function(node){var obj=eval(ZmList.ITEM_CLASS[this.type]);\nif(obj){var item=obj.createFromDom(node,{list:this});\nvar index=this._sortIndex(item);\nvar listSize=this.size();\nvar visible=false;\nif(index<listSize||listSize==0||(index==listSize&&!this._hasMore)){this.add(item,index);\nthis.createLocal(item);\nvisible=true\n}this._notify(ZmEvent.E_CREATE,{items:[item],sortIndex:index,visible:visible})\n}};\nZmContactList.prototype.moveLocal=function(b,a){if(!this.isCanonical){ZmList.prototype.moveLocal.call(this,b,a)\n}if(a==ZmFolder.ID_TRASH){for(var c=0;\nc<b.length;\nc++){this._updateHashes(b[c],false)\n}}};\nZmContactList.prototype.deleteLocal=function(a){ZmList.prototype.deleteLocal.call(this,a);\nfor(var b=0;\nb<a.length;\nb++){this._updateHashes(a[b],false)\n}};\nZmContactList.prototype.modifyLocal=function(e,d){if(d){this._evt.items=d.items=[e];\nthis._evt.item=d.contact;\nthis._notify(ZmEvent.E_MODIFY,d)\n}var a=d.contact;\nif(this.isCanonical||a.attr[ZmContact.F_email]!=d.oldAttr[ZmContact.F_email]){var f=new ZmContact(null,this);\nf.id=d.contact.id;\nf.attr=d.oldAttr;\nthis._updateHashes(f,false);\nthis._updateHashes(a,true)\n}if(d.fileAsChanged){this.remove(a);\nvar b=this._sortIndex(a);\nvar c=this.size();\nif(b<c||c==0||(b==c&&!this._hasMore)){this.add(a,b)\n}}if(a.addrbook&&(a.addrbook.id!=a.folderId)){a.addrbook=appCtxt.getById(a.folderId)\n}};\nZmContactList.prototype.createLocal=function(a){this._updateHashes(a,true)\n};\nZmContactList.prototype._updateHashes=function(b,g){this._app.updateCache(b,g);\nfor(var d=0;\nd<ZmContact.EMAIL_FIELDS.length;\nd++){var h=ZmContact.EMAIL_FIELDS[d];\nfor(var e=1;\ntrue;\ne++){var c=ZmContact.getAttributeName(h,e);\nvar a=ZmContact.getAttr(b,c);\nif(!a){break\n}if(g){this._emailToContact[a.toLowerCase()]=b\n}else{delete this._emailToContact[a.toLowerCase()]\n}}}if(appCtxt.get(ZmSetting.VOICE_ENABLED)||this._alwaysUpdateHashes){for(var d=0;\nd<ZmContact.PHONE_FIELDS.length;\nd++){var h=ZmContact.PHONE_FIELDS[d];\nfor(var e=1;\ntrue;\ne++){var c=ZmContact.getAttributeName(h,e);\nvar a=ZmContact.getAttr(b,c);\nif(!a){break\n}var f=this._getPhoneDigits(a);\nif(f){if(g){this._phoneToContact[a]={contact:b,field:c}\n}else{delete this._phoneToContact[a]\n}}}}}};\nZmContactList.prototype._getPhoneDigits=function(a){return a.replace(/[^\\d]/g,\"\")\n};\nZmContactList.prototype._sortIndex=function(b){var c=this._vector.getArray();\nfor(var d=0;\nd<c.length;\nd++){if(ZmContact.compareByFileAs(c[d],b)>0){return d\n}}return c.length\n};\nZmContactList.prototype.getIdHash=function(){return this._idHash\n};\nZmContactList.prototype._handleResponseModifyItem=function(b,a){}\n}if(AjxPackage.define(\"zimbraMail.abook.view.ZmContactsHelper\")){ZmContactsHelper=function(){};\nZmContactsHelper.search=function(c){var b=c.obj;\nif(b._searchButton){b._searchButton.setEnabled(false)\n}c.sortBy=c.ascending?ZmSearch.NAME_ASC:ZmSearch.NAME_DESC;\nc.types=AjxVector.fromArray([ZmItem.CONTACT]);\nc.offset=c.offset||0;\nc.limit=ZmContactsApp.SEARCHFOR_MAX;\nc.contactSource=b._contactSource;\nc.field=\"contact\";\nvar a=new ZmSearch(c);\na.execute({callback:c.respCallback,errorCallback:c.errorCallback})\n};\nZmContactsHelper._processSearchResponse=function(c,l){var b=c.getResults(ZmItem.CONTACT);\nvar k=[];\nvar m=b.getArray();\nfor(var f=0;\nf<m.length;\nf++){var h=m[f];\nif(h.isGroup()&&!h.isDL){var e=h.getGroupMembers().good.toString(AjxEmailAddress.SEPARATOR);\nZmContactsHelper._addContactToList(k,h,e,true)\n}else{var g=h.isGal?[h.getEmail()]:h.getEmails();\nfor(var d=0;\nd<g.length;\nd++){ZmContactsHelper._addContactToList(k,h,g[d])\n}if(l&&g.length==0){ZmContactsHelper._addContactToList(k,h,null)\n}}}return k\n};\nZmContactsHelper._addContactToList=function(c,a,e,d){var b=ZmContactsHelper._wrapContact(a,e,d);\nc.push(b)\n};\nZmContactsHelper._wrapContact=function(c,e,g){e=e||c.getEmail();\nvar b=c.getFileAs();\nvar a=(b!=e)?b:\"\";\nvar f=c.isGal?ZmContact.GROUP_GAL_REF:ZmContact.GROUP_CONTACT_REF;\nvar i=c.isGal?(c.ref||c.id):c.id;\nvar h=c.getFullNameForDisplay();\nvar d=new AjxEmailAddress(e,f,a,h,g);\nd.value=i;\nd.id=Dwt.getNextId();\nd.__contact=c;\nd.icon=c.getIcon();\nif(c.isDL){d.isGroup=true;\nd.canExpand=c.canExpand;\nvar j=window.parentAppCtxt||window.appCtxt;\nj.setIsExpandableDL(e,d.canExpand)\n}return d\n};\nZmContactsHelper._wrapInlineContact=function(b){var a=AjxEmailAddress.parse(b);\nif(!a){a=new AjxEmailAddress(b,null,b)\n}a.type=ZmContact.GROUP_INLINE_REF;\na.value=b;\na.id=Dwt.getNextId();\nreturn a\n};\nZmContactsHelper._getEmailField=function(b,a,c,d,e){if(d==ZmItem.F_TYPE){b[a++]=AjxImg.getImageHtml(c.icon)\n}else{if(d==ZmItem.F_NAME){b[a++]='<span style=\"white-space:nowrap\">';\nb[a++]=AjxStringUtil.htmlEncode(c.name||ZmMsg.noName);\nb[a++]=\"</span>\"\n}else{if(d==ZmItem.F_EMAIL){b[a++]=AjxStringUtil.htmlEncode(c.address)\n}else{if(d==ZmItem.F_DEPARTMENT){if(c.__contact){b[a++]=AjxStringUtil.htmlEncode(ZmContact.getAttr(c.__contact,ZmContact.F_department))\n}}}}}return a\n}\n}if(AjxPackage.define(\"zimbraMail.abook.view.ZmContactPicker\")){ZmContactPicker=function(a){DwtDialog.call(this,{parent:appCtxt.getShell(),title:ZmMsg.selectAddresses,id:\"ZmContactPicker\"});\nthis._buttonInfo=a;\nthis._initialized=false;\nthis._emailListOffset=0;\nthis._serverContactOffset=0;\nthis._ascending=true;\nthis._emailList=new AjxVector();\nthis._detailedSearch=appCtxt.get(ZmSetting.DETAILED_CONTACT_SEARCH_ENABLED);\nthis._ignoreSetDragBoundries=true;\nthis.setSize(Dwt.DEFAULT,this._getDialogHeight());\nthis._searchErrorCallback=new AjxCallback(this,this._handleErrorSearch)\n};\nZmContactPicker.prototype=new DwtDialog;\nZmContactPicker.prototype.constructor=ZmContactPicker;\nZmContactPicker.prototype.isZmContactPicker=true;\nZmContactPicker.prototype.toString=function(){return\"ZmContactPicker\"\n};\nZmContactPicker.DIALOG_HEIGHT=460;\nZmContactPicker.SEARCH_BASIC=\"search\";\nZmContactPicker.SEARCH_NAME=\"name\";\nZmContactPicker.SEARCH_EMAIL=\"email\";\nZmContactPicker.SEARCH_DEPT=\"dept\";\nZmContactPicker.SEARCH_PHONETIC=\"phonetic\";\nZmContactPicker.SHOW_ON_GAL=[ZmContactPicker.SEARCH_BASIC,ZmContactPicker.SEARCH_NAME,ZmContactPicker.SEARCH_EMAIL,ZmContactPicker.SEARCH_DEPT];\nZmContactPicker.SHOW_ON_NONGAL=[ZmContactPicker.SEARCH_BASIC,ZmContactPicker.SEARCH_NAME,ZmContactPicker.SEARCH_PHONETIC,ZmContactPicker.SEARCH_EMAIL];\nZmContactPicker.ALL=[ZmContactPicker.SEARCH_BASIC,ZmContactPicker.SEARCH_NAME,ZmContactPicker.SEARCH_PHONETIC,ZmContactPicker.SEARCH_EMAIL,ZmContactPicker.SEARCH_DEPT];\nZmContactPicker.prototype.popup=function(i,g,j,f){if(!this._initialized){this._initialize(f);\nthis._initialized=true\n}else{if(appCtxt.multiAccounts&&this._account!=f){this._account=f;\nthis._resetSelectDiv()\n}}this._emailListOffset=0;\nvar b=this._searchInSelect?this._searchInSelect.getValue():ZmContactsApp.SEARCHFOR_CONTACTS;\nthis._chooser.sourceListView.setSortByAsc(ZmItem.F_NAME,true);\nthis._chooser.reset();\nif(i){this._chooser._setActiveButton(i)\n}if(g){for(var c in g){this._chooser.addItems(g[c],DwtChooserListView.TARGET,true,c)\n}}for(var h in this._searchField){var k=this._searchField[h];\nk.disabled=false;\nk.value=(AjxUtil.isObject(j)?j[h]:j)||\"\"\n}this._prevButton.setEnabled(false);\nthis._nextButton.setEnabled(false);\nif(b===ZmContactsApp.SEARCHFOR_HAB&&this.sourceTreeView){var d=this.sourceTreeView.getSelected()?this.sourceTreeView.getSelected().mail:false;\nd&&this._getHabDlMembers(d)\n}else{this.search(null,true,true)\n}DwtDialog.prototype.popup.call(this);\nthis._resizeChooser();\nif((this.getLocation().x<0||this.getLocation().y<0)){this.setLocation(0,30);\nvar m=Dwt.getWindowSize();\nvar l=this.getSize();\nvar a=document.getElementById(this._dragHandleId);\nDwtDraggable.setDragBoundaries(a,100-l.x,m.x-100,0,m.y-100)\n}var e=this._searchField[ZmContactPicker.SEARCH_BASIC]||this._searchField[ZmContactPicker.SEARCH_NAME];\nappCtxt.getKeyboardMgr().grabFocus(e)\n};\nZmContactPicker.prototype._resetResults=function(){this._emailList.removeAll();\nthis._serverContactOffset=0;\nthis._emailListOffset=0\n};\nZmContactPicker.prototype.popdown=function(){for(var a in this._searchField){this._searchField[a].disabled=true\n}this._contactSource=null;\nthis._resetResults();\nDwtDialog.prototype.popdown.call(this)\n};\nZmContactPicker.prototype.search=function(m,e,j,c,h,g){if(g==undefined){this._resetResults()\n}if(e===null||e===undefined){e=this._ascending\n}else{this._ascending=e\n}var f;\nvar s=[];\nvar n=\"\";\nvar a=[];\nvar p=[];\nvar b=[];\nif(this._detailedSearch){var d=this.getSearchFieldValue(ZmContactPicker.SEARCH_NAME);\nvar r=this.getSearchFieldValue(ZmContactPicker.SEARCH_EMAIL);\nvar o=this.getSearchFieldValue(ZmContactPicker.SEARCH_DEPT);\nvar v=this.getSearchFieldValue(ZmContactPicker.SEARCH_PHONETIC);\nvar x=this._searchInSelect&&(this._searchInSelect.getValue()==ZmContactsApp.SEARCHFOR_GAL);\nif(d&&!x){var w=d.split(/\\s+/);\nfor(var t=0;\nt<w.length;\nt++){var l=w[t];\np.push(\"#\"+ZmContact.F_firstName+\":\"+l);\np.push(\"#\"+ZmContact.F_lastName+\":\"+l);\np.push(\"#\"+ZmContact.F_middleName+\":\"+l);\np.push(\"#\"+ZmContact.F_nickname+\":\"+l)\n}f=\"(\"+p.join(\" OR \")+\")\"\n}else{if(d&&x){b.push([{attr:ZmContact.F_firstName,op:\"has\",value:d},{attr:ZmContact.F_lastName,op:\"has\",value:d},{attr:ZmContact.F_middleName,op:\"has\",value:d},{attr:ZmContact.F_nickname,op:\"has\",value:d},{attr:ZmContact.F_phoneticFirstName,op:\"has\",value:d},{attr:ZmContact.F_phoneticLastName,op:\"has\",value:d}])\n}f=\"\"\n}if(r){if(x){b.push([{attr:ZmContact.F_email,op:\"has\",value:r},{attr:ZmContact.F_email2,op:\"has\",value:r},{attr:ZmContact.F_email3,op:\"has\",value:r},{attr:ZmContact.F_email4,op:\"has\",value:r},{attr:ZmContact.F_email5,op:\"has\",value:r},{attr:ZmContact.F_email6,op:\"has\",value:r},{attr:ZmContact.F_email7,op:\"has\",value:r},{attr:ZmContact.F_email8,op:\"has\",value:r},{attr:ZmContact.F_email9,op:\"has\",value:r},{attr:ZmContact.F_email10,op:\"has\",value:r},{attr:ZmContact.F_email11,op:\"has\",value:r},{attr:ZmContact.F_email12,op:\"has\",value:r},{attr:ZmContact.F_email13,op:\"has\",value:r},{attr:ZmContact.F_email14,op:\"has\",value:r},{attr:ZmContact.F_email15,op:\"has\",value:r},{attr:ZmContact.F_email16,op:\"has\",value:r}])\n}else{n=\"to:\"+r+\"*\"\n}}if(o&&x){b.push({attr:ZmContact.F_department,op:\"has\",value:o})\n}if(v&&!x){var k=v.split(/\\s+/);\nfor(var t=0;\nt<k.length;\nt++){a.push(\"#\"+ZmContact.F_phoneticFirstName+\":\"+k[t]);\na.push(\"#\"+ZmContact.F_phoneticLastName+\":\"+k[t])\n}}}else{f=this.getSearchFieldValue(ZmContactPicker.SEARCH_BASIC)\n}if(this._searchInSelect){var q=this._searchInSelect.getValue();\nthis._contactSource=(q==ZmContactsApp.SEARCHFOR_CONTACTS||q==ZmContactsApp.SEARCHFOR_PAS)?ZmItem.CONTACT:ZmId.SEARCH_GAL;\nif(q==ZmContactsApp.SEARCHFOR_PAS){s.push(ZmSearchController.generateQueryForShares(ZmId.ITEM_CONTACT)||\"is:local\")\n}else{if(q==ZmContactsApp.SEARCHFOR_CONTACTS){s.push(\"is:local\")\n}else{if(q==ZmContactsApp.SEARCHFOR_GAL){e=true\n}}}}else{this._contactSource=appCtxt.get(ZmSetting.CONTACTS_ENABLED,null,this._account)?ZmItem.CONTACT:ZmId.SEARCH_GAL;\nif(this._contactSource==ZmItem.CONTACT){s.push(\"is:local\")\n}}if(this._contactSource==ZmItem.CONTACT&&f!=\"\"&&!f.startsWith(\"(\")){f=f.replace(/\\\"/g,'\\\\\"');\nf='\"'+f+'\"'\n}if(a.length){f=f+\" (\"+a.join(\" OR \")+\")\"\n}if(n.length){f=f+\" \"+n\n}if(this._searchIcon){this._searchIcon.className=\"DwtWait16Icon\"\n}if(this._chooser){this._chooser.sourceListView.sortingEnabled=(this._contactSource==ZmItem.CONTACT)\n}var u={obj:this,ascending:e,query:f,queryHint:s.join(\" \"),conds:b,offset:g||0,lastId:c,lastSortVal:h,respCallback:(new AjxCallback(this,this._handleResponseSearch,[j])),errorCallback:this._searchErrorCallback,accountName:(this._account&&this._account.name),expandDL:true};\nZmContactsHelper.search(u)\n};\nZmContactPicker.prototype._contentHtml=function(d){var e;\nif(appCtxt.multiAccounts){var c=appCtxt.accountList.visibleAccounts;\nfor(var b=0;\nb<c.length;\nb++){var d=c[b];\nif(appCtxt.get(ZmSetting.CONTACTS_ENABLED,null,d)&&(appCtxt.get(ZmSetting.GAL_ENABLED,null,d)||appCtxt.get(ZmSetting.SHARING_ENABLED,null,d))){e=true;\nbreak\n}}}else{e=(appCtxt.get(ZmSetting.CONTACTS_ENABLED)&&(appCtxt.get(ZmSetting.GAL_ENABLED)||appCtxt.get(ZmSetting.SHARING_ENABLED)))\n}var a={id:this._htmlElId,showSelect:e,detailed:this._detailedSearch};\nreturn(AjxTemplate.expand(\"abook.Contacts#ZmContactPicker\",a))\n};\nZmContactPicker.prototype._resetSelectDiv=function(){this._searchInSelect.clearOptions();\nif(appCtxt.multiAccounts){var d=appCtxt.accountList.visibleAccounts;\nvar h=ZmOrganizer.ITEM_ORGANIZER;\nh=ZmOrganizer.ITEM_ORGANIZER[ZmItem.CONTACT];\nfor(var c=0;\nc<d.length;\nc++){this._searchInSelect.addOption(d[c].displayName,false,d[c].id);\nvar e=appCtxt.getFolderTree(d[c]);\nvar g=[];\ng=g.concat(e.getByType(h));\nfor(var b=0;\nb<g.length;\nb++){var f=g[b];\nif(f.noSuchFolder){continue\n}this._searchInSelect.addOption(f.getName(),false,f.id,\"ImgContact\")\n}if(d[c].isZimbraAccount&&!d[c].isMain){if(appCtxt.get(ZmSetting.CONTACTS_ENABLED,null,this._account)){if(appCtxt.get(ZmSetting.SHARING_ENABLED,null,this._account)){this._searchInSelect.addOption(ZmMsg.searchPersonalSharedContacts,false,ZmContactsApp.SEARCHFOR_PAS,\"ImgContact\")\n}}if(appCtxt.get(ZmSetting.GAL_ENABLED,null,this._account)){this._searchInSelect.addOption(ZmMsg.GAL,true,ZmContactsApp.SEARCHFOR_GAL,\"ImgContact\")\n}if(!appCtxt.get(ZmSetting.INITIALLY_SEARCH_GAL,null,this._account)||!appCtxt.get(ZmSetting.GAL_ENABLED,null,this._account)){this._searchInSelect.setSelectedValue(ZmContactsApp.SEARCHFOR_CONTACTS)\n}}}for(var a=0;\na<d.length;\na++){this._searchInSelect.enableOption(d[a].id,false)\n}}else{if(appCtxt.get(ZmSetting.CONTACTS_ENABLED,null,this._account)){this._searchInSelect.addOption(ZmMsg.contacts,false,ZmContactsApp.SEARCHFOR_CONTACTS);\nif(appCtxt.get(ZmSetting.SHARING_ENABLED,null,this._account)){this._searchInSelect.addOption(ZmMsg.searchPersonalSharedContacts,false,ZmContactsApp.SEARCHFOR_PAS)\n}}if(appCtxt.get(ZmSetting.GAL_ENABLED,null,this._account)){this._searchInSelect.addOption(ZmMsg.GAL,true,ZmContactsApp.SEARCHFOR_GAL)\n}if(!appCtxt.get(ZmSetting.INITIALLY_SEARCH_GAL,null,this._account)||!appCtxt.get(ZmSetting.GAL_ENABLED,null,this._account)){this._searchInSelect.setSelectedValue(ZmContactsApp.SEARCHFOR_CONTACTS)\n}}if(appCtxt.get(ZmSetting.HAB_ROOT)){this._searchInSelect.addOption(ZmMsg.OAB,false,ZmContactsApp.SEARCHFOR_HAB)\n}};\nZmContactPicker.prototype.getSearchFieldValue=function(a){if(!a&&!this._detailedSearch){a=ZmContactPicker.SEARCH_BASIC\n}var b=this._searchField[a];\nreturn b&&AjxStringUtil.trim(b.value)||\"\"\n};\nZmContactPicker.prototype._getDialogHeight=function(){return ZmContactPicker.DIALOG_HEIGHT-(appCtxt.isChildWindow?100:0)\n};\nZmContactPicker.prototype._getSectionHeight=function(a){return Dwt.getSize(document.getElementById(this._htmlElId+a)).y\n};\nZmContactPicker.prototype._resizeChooser=function(){var b=this._getDialogHeight()-this._getSectionHeight(\"_handle\")-this._getSectionHeight(\"_searchTable\")-this._getSectionHeight(\"_paging\")-this._getSectionHeight(\"_buttonsSep\")-this._getSectionHeight(\"_buttons\")-30;\nvar a=this.getSize().x-25;\nif(Dwt.getVisible(this.sourceTreeOverView.getHtmlElement())){a=this.getSize().x-250\n}this._chooser.resize(a,b)\n};\nZmContactPicker.prototype._initialize=function(c){this.setContent(this._contentHtml(c));\nthis._searchIcon=document.getElementById(this._htmlElId+\"_searchIcon\");\nthis._searchButton=new DwtButton({parent:this,parentElement:(this._htmlElId+\"_searchButton\")});\nthis._searchButton.setText(ZmMsg.search);\nthis._searchButton.addSelectionListener(new AjxListener(this,this._searchButtonListener));\nvar f=this._htmlElId+\"_listSelect\";\nvar m=document.getElementById(f);\nif(m){this._searchInSelect=new DwtSelect({parent:this,parentElement:f,id:Dwt.getNextId(\"ZmContactPickerSelect_\"),legendId:this._htmlElId+\"_listSelectLbl\"});\nthis._resetSelectDiv();\nthis._searchInSelect.addChangeListener(new AjxListener(this,this._searchTypeListener))\n}else{this.setSize(\"600\")\n}var n=this.getSize();\nvar d=[appCtxt.getCurrentAppName(),this.toString(),this._htmlElId];\nvar o={parent:this,collapsed:false,scroll:Dwt.SCROLL,overviewId:appCtxt.getOverviewId(d,null)};\nthis.sourceTreeOverView=appCtxt.getOverviewController().createOverview(o);\nthis.sourceTreeOverView.setTreeView(\"HAB\");\nthis.sourceTreeOverView.reparentHtmlElement(this._htmlElId+\"_habTree\");\nthis.sourceTreeOverView.setVisible(false);\nthis.setSize(n.x);\nthis.sourceTreeView=this.sourceTreeOverView.getTreeView(\"HAB\");\nthis.sourceTreeView&&this.sourceTreeView.addSelectionListener(new AjxListener(this,this._sourceTreeViewSelectionListener));\nthis._chooser=new ZmContactChooser({parent:this,buttonInfo:this._buttonInfo});\nthis._chooser.reparentHtmlElement(this._htmlElId+\"_chooser\");\nvar s=new AjxListener(this,this._pageListener);\nthis._prevButton=new DwtButton({parent:this,parentElement:(this._htmlElId+\"_pageLeft\")});\nthis._prevButton.setText(ZmMsg.previous);\nthis._prevButton.setImage(\"LeftArrow\");\nthis._prevButton.addSelectionListener(s);\nthis._nextButton=new DwtButton({parent:this,style:DwtLabel.IMAGE_RIGHT,parentElement:(this._htmlElId+\"_pageRight\")});\nthis._nextButton.setText(ZmMsg.next);\nthis._nextButton.setImage(\"RightArrow\");\nthis._nextButton.addSelectionListener(s);\nvar r=document.getElementById(this._htmlElId+\"_paging\");\nif(r){Dwt.setSize(r,this._chooser.sourceListView.getSize().x)\n}this.setButtonListener(DwtDialog.OK_BUTTON,new AjxListener(this,this._okButtonListener));\nthis.setButtonListener(DwtDialog.CANCEL_BUTTON,new AjxListener(this,this._cancelButtonListener));\nvar e={};\nvar l={};\nthis.mapFields(e,l);\nthis._searchField={};\nfor(var p in e){var b=Dwt.byId(e[p]);\nif(b){this._searchField[p]=b;\nDwt.setHandler(b,DwtEvent.ONKEYUP,ZmContactPicker._keyPressHdlr)\n}}this._searchRow={};\nfor(var k in l){var g=Dwt.byId(l[k]);\nif(g){this._searchRow[k]=g\n}}this._updateSearchRows(this._searchInSelect&&this._searchInSelect.getValue()||ZmContactsApp.SEARCHFOR_CONTACTS);\nthis._keyPressCallback=new AjxCallback(this,this._searchButtonListener);\nthis.sharedContactGroups=[];\nvar h=document.getElementById(this._htmlElId+\"_habTree\");\nif(h&&this.sourceTreeView){var a=h.getElementsByClassName(\"ZmOverview\")[0];\nDwt.setSize(a,\"210px\",h.clientHeight);\nDwt.setScrollStyle(a,Dwt.SCROLL);\nvar j=this.sourceTreeView._headerItem;\nj&&j.setScrollStyle(\"visible\");\na.style.paddingRight=\"15px\"\n}this._tabGroup=new DwtTabGroup(this.toString());\nthis._tabGroup.removeAllMembers();\nfor(var q=0;\nq<ZmContactPicker.ALL.length;\nq++){b=Dwt.byId(e[ZmContactPicker.ALL[q]]);\nif(Dwt.getVisible(b)){this._tabGroup.addMember(b)\n}}this._tabGroup.addMember(this._searchButton);\nthis._tabGroup.addMember(this._searchInSelect);\nthis._tabGroup.addMember(this._chooser.getTabGroupMember());\nthis._tabGroup.addMember(this._prevButton);\nthis._tabGroup.addMember(this._nextButton);\nfor(var q=0;\nq<this._buttonList.length;\nq++){this._tabGroup.addMember(this._button[this._buttonList[q]])\n}};\nZmContactPicker.prototype.mapFields=function(b,a){if(this._detailedSearch){b[ZmContactPicker.SEARCH_NAME]=this._htmlElId+\"_searchNameField\";\nb[ZmContactPicker.SEARCH_EMAIL]=this._htmlElId+\"_searchEmailField\";\nb[ZmContactPicker.SEARCH_DEPT]=this._htmlElId+\"_searchDepartmentField\";\nb[ZmContactPicker.SEARCH_PHONETIC]=this._htmlElId+\"_searchPhoneticField\";\na[ZmContactPicker.SEARCH_NAME]=this._htmlElId+\"_searchNameRow\";\na[ZmContactPicker.SEARCH_PHONETIC]=this._htmlElId+\"_searchPhoneticRow\";\na[ZmContactPicker.SEARCH_EMAIL]=this._htmlElId+\"_searchEmailRow\";\na[ZmContactPicker.SEARCH_DEPT]=this._htmlElId+\"_searchDepartmentRow\"\n}else{b[ZmContactPicker.SEARCH_BASIC]=this._htmlElId+\"_searchField\";\na[ZmContactPicker.SEARCH_BASIC]=this._htmlElId+\"_searchRow\"\n}};\nZmContactPicker.prototype._searchButtonListener=function(a){this._resetResults();\nthis.search()\n};\nZmContactPicker.prototype._handleResponseSearch=function(a,m){var c=m.getResponse();\nvar l=c.getAttribute(\"more\");\nvar k=c.getAttribute(\"paginationSupported\")!==false;\nthis._serverHasMoreAndPaginationSupported=l&&k;\nvar f=c.getAttribute(\"offset\");\nthis._serverContactOffset=f||0;\nvar b=c.getAttribute(\"info\");\nvar g=b&&b[0].wildcard[0].expanded==\"0\";\nif(!a&&!k&&(l||g)){var i=appCtxt.getMsgDialog();\ni.setMessage(ZmMsg.errorSearchNotExpanded);\ni.popup();\nif(g){return\n}}var j=ZmContactsHelper._processSearchResponse(c,this._includeContactsWithNoEmail);\nvar e=AjxVector.fromArray(j);\nif(k){this._emailList.addList(j)\n}else{this._emailList=e\n}var h=this.getSubList();\nif(this.toString()===\"ZmContactPicker\"){h=this.loadSharedGroupContacts(h)||h\n}this._showResults(h)\n};\nZmContactPicker.prototype._showResults=function(a){var c=a||this.getSubList();\nif(c.size()<ZmContactsApp.SEARCHFOR_MAX&&this._serverHasMoreAndPaginationSupported){this.search(null,null,null,null,null,this._serverContactOffset+ZmContactsApp.SEARCHFOR_MAX);\nreturn\n}if(this._searchIcon){this._searchIcon.className=\"\"\n}this._searchButton.setEnabled(true);\nif(c.size()==0&&this._emailListOffset==0){this._setResultsInView(c);\nthis._nextButton.setEnabled(false);\nthis._prevButton.setEnabled(false);\nthis._setNoResultsHtml();\nreturn\n}if(c.size()==0){this._emailListOffset-=ZmContactsApp.SEARCHFOR_MAX;\nthis._emailListOffset=Math.max(0,this._emailListOffset)\n}var b=this._serverHasMoreAndPaginationSupported||(this._emailListOffset+ZmContactsApp.SEARCHFOR_MAX)<this._emailList.size();\nthis._prevButton.setEnabled(this._emailListOffset>0);\nthis._nextButton.setEnabled(b);\nthis._resetSearchColHeaders();\nthis._setResultsInView(c)\n};\nZmContactPicker.prototype.loadSharedGroupContacts=function(n){var c,b,o,r,m,l,f,e,h,q,a,g,d;\nb=n.getArray();\nc=n.size();\ne=[];\nfor(m=0;\nm<c;\nm++){r=b[m];\no=r.__contact;\nif(o.isGroup()&&o.isShared()){if(this.sharedContactGroups.indexOf(r.value)!==-1){return\n}this.sharedContactGroups.push(r.value);\ne.push(r.value)\n}}h=e.length;\nq={BatchRequest:{GetContactsRequest:[],_jsns:\"urn:zimbra\",onerror:\"continue\"}};\na=q.BatchRequest;\ng=a.GetContactsRequest;\nfor(l=0,f=0;\nl<h;\nl++){g.push({cn:{id:e[l]},_jsns:\"urn:zimbraMail\",derefGroupMember:\"1\",returnCertInfo:\"1\",requestId:f++})\n}var p=new AjxCallback(this,this.handleSharedContactResponse,[n]);\nd=appCtxt.getAppController().sendRequest({jsonObj:q,asyncMode:true,callback:p})\n};\nZmContactPicker.prototype.handleSharedContactResponse=function(n,f){var m,t,a,p,e,l,g,d,c,o,h,s,r,q,b,e;\nif(f&&f.getResponse()&&f.getResponse().BatchResponse){m=f.getResponse().BatchResponse.GetContactsResponse\n}if(!m){return\n}t=m.length;\na=n.getArray();\np=n.size();\nfor(d=0;\nd<p;\nd++){e=[];\nfor(g=0;\ng<t;\ng++){c=m[g];\no=c.cn[0];\nif(o.m){for(l=0;\nl<o.m.length;\nl++){h=o.m[l];\ns=false;\nif(h.type==ZmContact.GROUP_GAL_REF){s=true\n}if(h.cn&&h.cn.length>0){r=h.cn[0];\nr.ref=r.ref||(s&&h.value);\nq=ZmContact.createFromDom(r,{list:this.list,isGal:s});\nq.isDL=s&&q.attr[ZmContact.F_type]===\"group\";\nappCtxt.cacheSet(h.value,q);\nb=a[d];\nif(b.value===o.id){e.push('\"'+q.getFullName()+'\" <'+q.getEmails()+\">;\");\nn._array[d].address=e.join(\"\")\n}}}ZmContact.prototype._loadFromDom(o)\n}}}this._showResults(n)\n};\nZmContactPicker.prototype._setResultsInView=function(a){this._chooser.setItems(a)\n};\nZmContactPicker.prototype._setNoResultsHtml=function(a){this._chooser.sourceListView._setNoResultsHtml()\n};\nZmContactPicker.prototype._updateSearchRows=function(a){var c=(a==ZmContactsApp.SEARCHFOR_GAL)?ZmContactPicker.SHOW_ON_GAL:ZmContactPicker.SHOW_ON_NONGAL;\nfor(var b in this._searchRow){Dwt.setVisible(this._searchRow[b],AjxUtil.indexOf(c,b)!=-1)\n}for(var b in this._searchField){var e=this._searchField[b];\nif(this._tabGroup.contains(e)){this._tabGroup.removeMember(e)\n}}for(var d=0;\nd<c.length;\nd++){this._tabGroup.addMember(this._searchField[c[d]])\n}this._resizeChooser()\n};\nZmContactPicker.prototype._handleErrorSearch=function(){this._searchButton.setEnabled(true);\nreturn false\n};\nZmContactPicker.prototype._pageListener=function(a){if(a.item==this._prevButton){this._emailListOffset-=ZmContactsApp.SEARCHFOR_MAX;\nthis._emailListOffset=Math.max(0,this._emailListOffset)\n}else{this._emailListOffset+=ZmContactsApp.SEARCHFOR_MAX\n}this._showResults()\n};\nZmContactPicker.prototype.getSubList=function(){var d=this._emailList.size();\nvar c=this._emailListOffset+ZmContactsApp.SEARCHFOR_MAX;\nif(c>d){c=d\n}var b=(this._emailListOffset<c)?this._emailList.getArray().slice(this._emailListOffset,c):[];\nreturn AjxVector.fromArray(b)\n};\nZmContactPicker.prototype._searchTypeListener=function(b){var a=b._args.oldValue;\nvar d=b._args.newValue;\nif(a!=d){if(d!==ZmContactsApp.SEARCHFOR_HAB){this._updateSearchRows(d);\nthis._searchButtonListener();\nthis.sourceTreeOverView.setVisible(false);\nthis._resizeChooser()\n}else{this.sourceTreeOverView.setVisible(true);\nthis._resizeChooser();\nif(this.sourceTreeView){var c=this.sourceTreeView.getSelected()?this.sourceTreeView.getSelected().mail:false;\nc&&this._getHabDlMembers(c)\n}}}};\nZmContactPicker.prototype._resetSearchColHeaders=function(){var a=this._chooser.sourceListView;\nvar d=this._chooser.targetListView;\na.headerColCreated=false;\nd.headerColCreated=false;\nvar f=this._searchInSelect&&(this._searchInSelect.getValue()==ZmContactsApp.SEARCHFOR_GAL);\nvar b=0;\nfor(var c=0;\nc<a._headerList.length;\nc++){var e=a._headerList[c]._field;\nif(e==ZmItem.F_NAME){b=c\n}if(e==ZmItem.F_DEPARTMENT){a._headerList[c]._visible=f&&this._detailedSearch\n}}var g=f?null:ZmItem.F_NAME;\na._headerList[b]._sortable=g;\na.createHeaderHtml(g);\nfor(c=0;\nc<d._headerList.length;\nc++){if(d._headerList[c]._field==ZmItem.F_DEPARTMENT){d._headerList[c]._visible=f&&this._detailedSearch\n}}d.createHeaderHtml()\n};\nZmContactPicker.prototype._okButtonListener=function(a){var b=this._chooser.getItems();\nDwtDialog.prototype._buttonListener.call(this,a,[b])\n};\nZmContactPicker.prototype._cancelButtonListener=function(a){DwtDialog.prototype._buttonListener.call(this,a);\nthis.popdown()\n};\nZmContactPicker._keyPressHdlr=function(c){var b=DwtControl.getTargetControl(c);\nvar a=DwtKeyEvent.getCharCode(c);\nif(b._keyPressCallback&&(a==13||a==3)){b._keyPressCallback.run();\nreturn false\n}return true\n};\nZmContactPicker.prototype._sourceTreeViewSelectionListener=function(a){this._resetResults();\nthis._getHabDlMembers(a.item._data._object_.mail)\n};\nZmContactPicker.prototype._getHabDlMembers=function(d){var c={GetDistributionListMembersRequest:{_jsns:\"urn:zimbraAccount\",offset:\"0\",limit:\"0\"}};\nvar a=c.GetDistributionListMembersRequest;\na.dl={_content:d};\nvar b=new AjxCallback(this,this._handleResponseGetDLMembers,[\"0\",\"0\"]);\nappCtxt.getAppController().sendRequest({jsonObj:c,asyncMode:true,callback:b})\n};\nZmContactPicker.prototype._handleResponseGetDLMembers=function(e,c,p,b){if(b||!p.list){b=b||p.getResponse();\nb=b.GetDistributionListMembersResponse;\nvar o=b.more;\nvar n=b.paginationSupported!==false;\nthis._serverHasMoreAndPaginationSupported=o&&n;\nvar f=b.groupMembers&&b.groupMembers.length>0&&b.groupMembers[0].groupMember;\nvar k=new ZmContactList(false,false,\"CONTACT\");\nvar m=[];\nif(f&&f.length){for(var h=0,l=f.length;\nh<l;\nh++){var g=f[h];\ng._attrs.email=g.name;\ng._attrs.name=g._attrs.displayName;\ng._attrs.address=g.name;\nk.addFromDom(g)\n}var a=k.getVector().getArray();\nfor(var d=0,l=a.length;\nd<l;\nd++){ZmContactsHelper._addContactToList(m,a[d])\n}}this._showResults(AjxVector.fromArray(m))\n}};\nZmContactChooser=function(a){DwtChooser.call(this,a)\n};\nZmContactChooser.prototype=new DwtChooser;\nZmContactChooser.prototype.constructor=ZmContactChooser;\nZmContactChooser.prototype._createSourceListView=function(){return new ZmContactChooserSourceListView(this)\n};\nZmContactChooser.prototype._createTargetListView=function(){return new ZmContactChooserTargetListView(this,(this._buttonInfo.length>1))\n};\nZmContactChooser.prototype._isDuplicate=function(a,b){return b.containsLike(a,a.getAddress)\n};\nZmContactChooserSourceListView=function(a){DwtChooserListView.call(this,{parent:a,type:DwtChooserListView.SOURCE});\nthis.setScrollStyle(Dwt.CLIP)\n};\nZmContactChooserSourceListView.prototype=new DwtChooserListView;\nZmContactChooserSourceListView.prototype.constructor=ZmContactChooserSourceListView;\nZmContactChooserSourceListView.prototype.toString=function(){return\"ZmContactChooserSourceListView\"\n};\nZmContactChooserSourceListView.prototype.getToolTipContent=function(c){if(this._hoveredItem){var b={address:this._hoveredItem.address,contact:this._hoveredItem.__contact,ev:c,noRightClick:true};\nvar a=new AjxCallback(this,function(d){appCtxt.getToolTipMgr().getToolTip(ZmToolTipMgr.PERSON,b,d)\n});\nreturn{callback:a}\n}else{return\"\"\n}};\nZmContactChooserSourceListView.prototype._getHeaderList=function(){var a=[];\na.push(new DwtListHeaderItem({field:ZmItem.F_TYPE,icon:\"Folder\",width:ZmMsg.COLUMN_WIDTH_FOLDER_CN}));\na.push(new DwtListHeaderItem({field:ZmItem.F_NAME,text:ZmMsg._name,width:ZmMsg.COLUMN_WIDTH_NAME_CN,resizeable:true}));\na.push(new DwtListHeaderItem({field:ZmItem.F_DEPARTMENT,text:ZmMsg.department,width:ZmMsg.COLUMN_WIDTH_DEPARTMENT_CN,resizeable:true}));\na.push(new DwtListHeaderItem({field:ZmItem.F_EMAIL,text:ZmMsg.email,resizeable:true}));\nreturn a\n};\nZmContactChooserSourceListView.prototype._resetColWidth=function(){if(!this.headerColCreated){return\n}var c=this._getLastColumnIndex();\nif(c){var b=this._headerList[c];\nvar a=document.getElementById(b._id);\nif(a){var d=a.firstChild;\na.style.width=d.style.width=(b._width||\"\")\n}}};\nZmContactChooserSourceListView.prototype._calcRelativeWidth=function(c){var b=this._headerList[c];\nif(!b._width||(b._width&&b._width==\"auto\")){var a=document.getElementById(b._id);\nreturn(a)?(a.clientWidth-(AjxEnv.isIE?Dwt.SCROLLBAR_WIDTH:5)):null\n}return b._width\n};\nZmContactChooserSourceListView.prototype._mouseOverAction=function(b,d){DwtChooserListView.prototype._mouseOverAction.call(this,b,d);\nvar c=b.target.id||d.id;\nvar a=this.getItemFromElement(d);\nthis._hoveredItem=(c&&a)?a:null;\nreturn true\n};\nZmContactChooserSourceListView.prototype._getCellContents=function(b,a,d,e,g,f){if(e==ZmItem.F_EMAIL&&AjxEnv.isIE){var c=AjxStringUtil.getWidth(d.address);\nb[a++]=\"<div style='float; left; overflow: visible; width: \"+c+\";'>\";\na=ZmContactsHelper._getEmailField(b,a,d,e,g,f);\nb[a++]=\"</div>\"\n}else{a=ZmContactsHelper._getEmailField(b,a,d,e,g,f)\n}return a\n};\nZmContactChooserSourceListView.prototype._getCellAttrText=function(a,b,c){if(b==ZmItem.F_EMAIL){return\"style='position: relative; overflow: visible;'\"\n}};\nZmContactChooserTargetListView=function(a,b){this._showType=b;\nDwtChooserListView.call(this,{parent:a,type:DwtChooserListView.TARGET});\nthis.setScrollStyle(Dwt.CLIP)\n};\nZmContactChooserTargetListView.prototype=new DwtChooserListView;\nZmContactChooserTargetListView.prototype.constructor=ZmContactChooserTargetListView;\nZmContactChooserTargetListView.prototype.toString=function(){return\"ZmContactChooserTargetListView\"\n};\nZmContactChooserTargetListView.prototype._getHeaderList=function(){var b=[];\nvar a=this._view;\nif(this._showType){b.push(new DwtListHeaderItem({field:ZmItem.F_TYPE,icon:\"ContactsPicker\",width:ZmMsg.COLUMN_WIDTH_TYPE_CN}))\n}b.push(new DwtListHeaderItem({field:ZmItem.F_NAME,text:ZmMsg._name,width:ZmMsg.COLUMN_WIDTH_NAME_CN,resizeable:true}));\nb.push(new DwtListHeaderItem({field:ZmItem.F_DEPARTMENT,text:ZmMsg.department,width:ZmMsg.COLUMN_WIDTH_DEPARTMENT_CN,resizeable:true}));\nb.push(new DwtListHeaderItem({field:ZmItem.F_EMAIL,text:ZmMsg.email,resizeable:true}));\nreturn b\n};\nZmContactChooserTargetListView.prototype._mouseOverAction=ZmContactChooserSourceListView.prototype._mouseOverAction;\nZmContactChooserTargetListView.prototype._getCellContents=function(b,a,d,e,g,f){if(e==ZmItem.F_TYPE){d.setType(d._buttonId);\nb[a++]=ZmMsg[d.getTypeAsString()];\nb[a++]=\":\"\n}else{if(e==ZmItem.F_EMAIL&&AjxEnv.isIE){var c=AjxStringUtil.getWidth(d.address)+10;\nb[a++]=\"<div style='float; left;  width: \"+c+\";'>\";\na=ZmContactsHelper._getEmailField(b,a,d,e,g,f);\nb[a++]=\"</div>\"\n}else{a=ZmContactsHelper._getEmailField(b,a,d,e,g)\n}}return a\n};\nZmContactChooserTargetListView.prototype._resetColWidth=function(){if(!this.headerColCreated){return\n}var c=this._getLastColumnIndex();\nif(c){var b=this._headerList[c];\nvar a=document.getElementById(b._id);\nif(a){var d=a.firstChild;\na.style.width=d.style.width=(b._width||\"\")\n}}};\nZmContactChooserTargetListView.prototype._calcRelativeWidth=function(c){var b=this._headerList[c];\nif(!b._width||(b._width&&b._width==\"auto\")){var a=document.getElementById(b._id);\nreturn(a)?(a.clientWidth-(AjxEnv.isIE?Dwt.SCROLLBAR_WIDTH:5)):null\n}return b._width\n};\nZmContactChooserTargetListView.prototype._getCellAttrText=function(a,b,c){if(b==ZmItem.F_EMAIL){return\"style='position: relative; overflow: visible;'\"\n}}\n}if(AjxPackage.define(\"zimbraMail.abook.controller.ZmHabTreeController\")){ZmHabTreeController=function(){ZmFolderTreeController.call(this,ZmOrganizer.HAB)\n};\nZmHabTreeController.prototype=new ZmFolderTreeController;\nZmHabTreeController.prototype.constructor=ZmHabTreeController;\nZmHabTreeController.prototype.isZmHabTreeController=true;\nZmHabTreeController.prototype.toString=function(){return\"ZmHabTreeController\"\n}\n}}if(AjxPackage.define(\"abook.Contacts\")){AjxTemplate.register(\"abook.Contacts#ZmEditContactView\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<div id='\";\na[c++]=e.id;\na[c++]=\"_DEBUG'></div><table role=\\\"presentation\\\" valign='top' width='100%'>\";\na[c++]=AjxTemplate.expand(\"#ZmEditContactView_header\",e);\na[c++]=AjxTemplate.expand(\"#ZmEditContactView_body\",e);\na[c++]=\"</table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactView\"},false);\nAjxTemplate.register(\"abook.Contacts\",AjxTemplate.getTemplate(\"abook.Contacts#ZmEditContactView\"),AjxTemplate.getParams(\"abook.Contacts#ZmEditContactView\"));\nAjxTemplate.register(\"abook.Contacts#ZmEditContactView_header\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<tr valign='top' class='contactHeaderRow'><td class='contactHeaderCell' align='center'><div id='\";\na[c++]=e.id;\na[c++]=\"_IMAGE' tabindex='100'></div><div id='\";\na[c++]=e.id;\na[c++]=\"_REMOVE_IMAGE_row' style='padding-left:7px;font-size:.8em;white-space:nowrap;'><a id='\";\na[c++]=e.id;\na[c++]=\"_VIEW_IMAGE' href='#view' tabindex='101'>\";\na[c++]=ZmMsg.view;\na[c++]=\"</a>\\n\";\na[c++]=\"\\t\\t\\t\\t\\t|\\n\";\na[c++]=\"\\t\\t\\t\\t\\t<a id='\";\na[c++]=e.id;\na[c++]=\"_REMOVE_IMAGE' href='#remove' tabindex='102'>\";\na[c++]=ZmMsg.remove;\na[c++]=\"</a></div></td><td class='contactHeaderCell' valign='bottom'><div style='padding:.125em;'><div id='\";\na[c++]=e.id;\na[c++]=\"_FULLNAME'></div></div>\";\nif(appCtxt.get(ZmSetting.TAGGING_ENABLED)){a[c++]=\"<div id='\";\na[c++]=e.id;\na[c++]=\"_TAG' class='contactHeaderCellRow'></div>\"\n}a[c++]=AjxTemplate.expand(\"#ZmEditContactView_headerName\",e);\na[c++]=AjxTemplate.expand(\"#ZmEditContactView_headerJobInfo\",e);\na[c++]=\"</td><td class='contactHeaderCell'><table role=\\\"presentation\\\" class='ZPropertySheet' cellspacing='6'><tr><td style='text-align:right;white-space:nowrap;'>\";\na[c++]=ZmMsg.fileAsLabel;\na[c++]=\"</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_FILE_AS' tabindex='400'></div></td></tr><tr><td style='text-align:right;white-space:nowrap;'>\";\na[c++]=ZmMsg.locationLabel;\na[c++]=\"</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_FOLDER' tabindex='401'></div></td></tr>\";\nif(appCtxt.multiAccounts){a[c++]=\"<tr><td style='text-align:right;'>\";\na[c++]=ZmMsg.accountLabel;\na[c++]=\"</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_ACCOUNT' tabindex='402'></div></td></tr>\"\n}a[c++]=\"</table></td></tr>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactView_header\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactView_headerName\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<div id='\";\na[c++]=e.id;\na[c++]=\"_NAME_row' class='contactHeaderCellRow'><table role=\\\"presentation\\\">\";\nif(appCtxt.get(ZmSetting.PHONETIC_CONTACT_FIELDS)){a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_row'><td id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_PREFIX' class='inlineInput'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_FIRST_row' class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_FIRST' tabindex='190'></div></td><td id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_MIDDLE' class='inlineInput'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_MAIDEN' class='inlineInput'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_LAST_row' class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_LAST' tabindex='191'></div></td><td id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_SUFFIX' class='inlineInput'></td></tr>\"\n}a[c++]=\"<tr><td id='\";\na[c++]=e.id;\na[c++]=\"_PREFIX_row' class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_PREFIX' tabindex='200'></div></td><td class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_FIRST' tabindex='201'></div></td><td id='\";\na[c++]=e.id;\na[c++]=\"_MIDDLE_row' class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_MIDDLE' tabindex='202'></div></td><td id='\";\na[c++]=e.id;\na[c++]=\"_MAIDEN_row' class='inlineInput'><table role=\\\"presentation\\\"><tr><td class='inlineInputWrapper'>(</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_MAIDEN' tabindex='203'></div></td><td class='inlineInputWrapper'>)</td></tr></table></td><td class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_LAST' tabindex='204'></div></td><td id='\";\na[c++]=e.id;\na[c++]=\"_SUFFIX_row' class='inlineInput'><table role=\\\"presentation\\\"><tr><td class='inlineInputWrapper'>,</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_SUFFIX' tabindex='205'></div></td></tr></table></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_DETAILS' tabindex='206'></div></td></tr></table></div><div id='\";\na[c++]=e.id;\na[c++]=\"_NICKNAME_row' class='contactHeaderCellRow'><table role=\\\"presentation\\\"><tr><td class='inlineInputWrapper'>&ldquo;</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_NICKNAME' tabindex='250'></div></td><td class='inlineInputWrapper'>&rdquo;</td></tr></table></div>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactView_headerName\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactView_headerJobInfo\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<div id='\";\na[c++]=e.id;\na[c++]=\"_JOB_row' class='contactHeaderCellRow'><table role=\\\"presentation\\\"><tr><td id='\";\na[c++]=e.id;\na[c++]=\"_TITLE_row' class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_TITLE' tabindex='301'></div></td><td id='\";\na[c++]=e.id;\na[c++]=\"_TITLE_DEPARTMENT_SEP' class='inlineInputWrapper'>&ndash;</td><td id='\";\na[c++]=e.id;\na[c++]=\"_DEPARTMENT_row' class='inlineInput'><div id='\";\na[c++]=e.id;\na[c++]=\"_DEPARTMENT' tabindex='302'></div></td></tr></table></div><div id='\";\na[c++]=e.id;\na[c++]=\"_COMPANY_row' class='contactHeaderCellRow'><table role=\\\"presentation\\\">\";\nif(appCtxt.get(ZmSetting.PHONETIC_CONTACT_FIELDS)){a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_COMPANY_row'><td><div id='\";\na[c++]=e.id;\na[c++]=\"_PHONETIC_COMPANY' tabindex='304'></div></td></tr>\"\n}a[c++]=\"<tr><td><div id='\";\na[c++]=e.id;\na[c++]=\"_COMPANY' tabindex='305'></div></td></tr></table></div>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactView_headerJobInfo\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactView_body\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<tr><td class=rowLabel>\";\na[c++]=ZmMsg.emailLabel;\na[c++]=\"</td><td class=rowValue><div id='\";\na[c++]=e.id;\na[c++]=\"_EMAIL' tabindex='500'></div></td></tr><tr><td class=rowLabel>\";\na[c++]=ZmMsg.phoneLabel;\na[c++]=\"</td><td class=rowValue><div id='\";\na[c++]=e.id;\na[c++]=\"_PHONE' tabindex='600'></div></td></tr><tr><td class=rowLabel>\";\na[c++]=ZmMsg.imLabel;\na[c++]=\"</td><td class=rowValue><div id='\";\na[c++]=e.id;\na[c++]=\"_IM' tabindex='700'></div></td></tr><tr><td class=rowLabel>\";\na[c++]=ZmMsg.addressLabel;\na[c++]=\"</td><td class=rowValue><div id='\";\na[c++]=e.id;\na[c++]=\"_ADDRESS' tabindex='800'></div></td></tr><tr><td class=rowLabel>\";\na[c++]=ZmMsg.urlLabel;\na[c++]=\"</td><td class=rowValue><div id='\";\na[c++]=e.id;\na[c++]=\"_URL' tabindex='900'></div></td></tr><tr><td class=rowLabel>\";\na[c++]=ZmMsg.otherLabel;\na[c++]=\"</td><td class=rowValue><div id='\";\na[c++]=e.id;\na[c++]=\"_OTHER' tabindex='1000'></div></td></tr><tr><td class=rowLabel>\";\na[c++]=ZmMsg.notesLabel;\na[c++]=\"</td><td class=rowValue><div id='\";\na[c++]=e.id;\na[c++]=\"_NOTES' tabindex='1100'></div></td></tr>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactView_body\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewRows\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]='<table role=\"presentation\"><tbody id=\\'';\na[c++]=e.id;\na[c++]=\"_rows' tabindex='100'></tbody></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewRows\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewDetailsButton\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<span class='ScreenReaderOnly'>\";\na[c++]=ZmMsg.chooseFields;\na[c++]=\"</span><span aria-hidden='true' id='\";\na[c++]=e.id;\na[c++]=\"_title' class='ZButtonBorder ZWidgetTitle'></span>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewDetailsButton\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewInputSelect\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" class='inputTable'><tr><td class='inputElement'><div id='\";\na[c++]=e.id;\na[c++]=\"_input' tabindex='100'></div></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_select' tabindex='200'></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewInputSelect\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewInputDoubleSelect\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" class='inputTable'><tr><td class='inputElement'><div id='\";\na[c++]=e.id;\na[c++]=\"_input' tabindex='100'></div></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_select' tabindex='200'></div></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_select2' tabindex='300'></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewInputDoubleSelect\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewOther\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" class='inputTable'><tr><td class='inputElement'><div id='\";\na[c++]=e.id;\na[c++]=\"_input' tabindex='100'></div></td><td class='inputElement' style='width:47px;'><div id='\";\na[c++]=e.id;\na[c++]=\"_picker' tabindex='200'></div></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_select' tabindex='300'></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewOther\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewAddressRow\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" class='inputTable'><tr id='\";\na[c++]=e.id;\na[c++]=\"_row' class='DwtFormRow' valign='top'><td><div id='\";\na[c++]=e.id;\na[c++]=\"' tabindex='100'></div></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_add' class='DwtFormRowAdd' tabindex='200'></div></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_remove' class='DwtFormRowRemove' tabindex='300'></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewAddressRow\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewAddressSelect\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" class='inputTable'><tr valign='top'><td class='inputElement'><div id='\";\na[c++]=e.id;\na[c++]=\"_input' tabindex='100' style=\\\"padding:1px 3px;\\\"></div></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_select' tabindex='200'></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewAddressSelect\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmEditContactViewAddress\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" class='addressTable' width='100%'><tr><td><div id='\";\na[c++]=e.id;\na[c++]=\"_STREET' tabindex='100'></div></td></tr></table><table role=\\\"presentation\\\" class='addressTable' width='100%' style='margin-bottom:3px;'><tr><td><div id='\";\na[c++]=e.id;\na[c++]=\"_CITY' tabindex='200'></div></td><td>,&nbsp;</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_STATE' tabindex='300'></div></td><td>&nbsp;&nbsp;</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_ZIP' tabindex='400'></div></td></tr></table><table role=\\\"presentation\\\" class='addressTable' width='100%'><tr><td><div id='\";\na[c++]=e.id;\na[c++]=\"_COUNTRY' tabindex='500'></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmEditContactViewAddress\",\"class\":\"DwtForm ZmEditContactViewAddress\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" width='100%' height='100%' class='ZPropertySheet' cellspacing='6'><col width='230'></col><tr><td id='\";\na[c++]=e.id;\na[c++]=\"_alphabetbar'></td></tr><tr height='100%'><td valign='top'><div id='\";\na[c++]=e.id;\na[c++]=\"_splitview' style='position:relative;width:100%;height:100%;'><div id='\";\na[c++]=e.id;\na[c++]=\"_listview' style='position:absolute;width:230px;height:100%;left:0;'></div><div id='\";\na[c++]=e.id;\na[c++]=\"_sash' style='position:absolute;width:8px;height:100%;left:230px;'></div><div id='\";\na[c++]=e.id;\na[c++]=\"_contentCell' style='position:absolute;left:238px;'><div class='ZmContactInfoView' id='\";\na[c++]=e.id;\na[c++]=\"_content'></div></div></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#SplitView\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_content\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table id='\";\na[c++]=e.id;\na[c++]=\"_details' class='contactContentTable'>\";\na[c++]=AjxTemplate.expand(\"abook.Contacts#SplitView_header\",e);\na[c++]=ZmContactSplitView.showContactEmails(e);\na[c++]=ZmContactSplitView.showContactPhones(e);\na[c++]=ZmContactSplitView.showContactIMs(e);\na[c++]=ZmContactSplitView.showContactAddresses(e);\na[c++]=ZmContactSplitView.showContactUrls(e);\na[c++]=ZmContactSplitView.showContactOther(e);\na[c++]=ZmContactSplitView.showContactNotes(e);\na[c++]=ZmContactSplitView.showContactDLMembers(e);\na[c++]=\"</table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#SplitView_content\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_group\",function(a,d,i,h){var f=Boolean(h);\ni=(typeof i==\"string\"?{id:i}:i)||{};\nh=h||[];\nvar g=h.length;\nvar p=i.imageUrl;\nvar b=i.defaultImageUrl;\nvar l=i.email;\nvar n=i.title;\nvar c=i.fullName;\nvar j=i.phone;\nvar o=i.location;\nvar k=i.imgClassName||\"Person_48\";\nvar q=\"id='\"+i.quickAddId+\"'\";\nvar e=i.isEdit;\nvar m=\"id='\"+i.delButtonId+\"'\";\nh[g++]=\"<table role=\\\"presentation\\\" class='contactGroupTable'><tr>\";\nif(p){h[g++]=\"<td class='contactGroupTableImage' width='48'><img src='\";\nh[g++]=p;\nh[g++]=\"'\\n\";\nh[g++]=\"\\t\\t\\t\";\nif(AjxEnv.isIE){h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\t\\theight='48'\\n\";\nh[g++]=\"\\t\\t\\t\"\n}else{h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\t\\tstyle='max-width:48px;max-height:48px;'\\n\";\nh[g++]=\"\\t\\t\\t\"\n}if(b){h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\t\\tonerror='this.onerror=null;this.src=\\\"\";\nh[g++]=i.defaultImageUrl;\nh[g++]=\"\\\";'\\n\";\nh[g++]=\"\\t\\t\\t\"\n}h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\tborder='0'></td>\"\n}else{h[g++]=\"<td class='contactGroupTableImage' width='48'>\";\nh[g++]=AjxImg.getImageHtml(k);\nh[g++]=\"</td>\"\n}h[g++]=\"<td class='contactGroupTableContent'>\";\nif(c){h[g++]=\"<div><strong>\";\nh[g++]=c;\nh[g++]=\"</strong></div>\"\n}if(n){h[g++]=\"<div><span>\";\nh[g++]=n;\nh[g++]=\"</span></div>\"\n}if(l){h[g++]=\"<div>\";\nh[g++]=l;\nif(i.isInline){h[g++]=AjxImg.getImageHtml(\"Plus\",\"\",q)\n}h[g++]=\"</div>\"\n}if(j){h[g++]=\"<div>\";\nh[g++]=j;\nh[g++]=\"</div>\"\n}if(o){h[g++]=\"<div>\";\nh[g++]=o;\nh[g++]=\"</div>\"\n}h[g++]=\"</td>\";\nif(e){h[g++]=\"<td width='36' valign='top'>\";\nh[g++]=AjxImg.getImageHtml(\"Delete\",\"\",m);\nh[g++]=\"</td>\"\n}h[g++]=\"</tr></table>\";\nreturn f?h.length:h.join(\"\")\n},{id:\"abook.Contacts#SplitView_group\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_header\",function(b,d,i,h){var f=Boolean(h);\ni=(typeof i==\"string\"?{id:i}:i)||{};\nh=h||[];\nvar g=h.length;\nvar k=i.contact;\nvar n=k.getImageUrl();\nvar c=k.isDistributionList()?ZmMsg.distributionList:k.isGroup()?ZmMsg.group:ZmMsg.contact;\nvar a=i.defaultImageUrl;\nvar m=appCtxt.multiAccounts&&k.account&&k.account.getDisplayName();\nvar j=i.id+\"_tags_contact\";\nvar l=k.isDistributionList()?\"Group_48\":k.isGroup()?\"GroupPerson_48\":\"Person_48\";\nvar e=i.isEdit;\nh[g++]=\"<tr class='headerRow' id='\";\nh[g++]=i.id;\nh[g++]=\"_headerRow'>\";\nif(n){h[g++]=\"<td class='rowLabel'><div class='headerRowImage'><img src='\";\nh[g++]=n;\nh[g++]=\"'\\n\";\nh[g++]=\"\\t\\t\\t\\t\";\nif(AjxEnv.isIE){h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\t\\t\\theight='48'\\n\";\nh[g++]=\"\\t\\t\\t\\t\"\n}else{h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\t\\t\\tstyle='max-width:48px;max-height:48px;'\\n\";\nh[g++]=\"\\t\\t\\t\\t\"\n}if(a){h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\t\\t\\tonerror='this.onerror=null;this.src=\\\"\";\nh[g++]=i.defaultImageUrl;\nh[g++]=\"\\\";'\\n\";\nh[g++]=\"\\t\\t\\t\\t\"\n}h[g++]=\"\\n\";\nh[g++]=\"\\t\\t\\t\\t\\tborder=0 alt='\";\nh[g++]=c;\nh[g++]=\"'></div></td>\"\n}else{h[g++]=\"<td class='rowLabel'><div class='headerRowImage'>\";\nh[g++]=AjxImg.getImageHtml({imageName:l,altText:c});\nh[g++]=\"</div></td>\"\n}h[g++]=\"<td class='rowValue'>\";\nh[g++]=AjxTemplate.expand(\"#SplitView_headerName\",i);\nh[g++]=AjxTemplate.expand(\"#SplitView_headerJobInfo\",i);\nif(i.dlInfo&&i.dlInfo.description){h[g++]=\"<div>\";\nh[g++]=AjxStringUtil.htmlEncode(i.dlInfo.description);\nh[g++]=\"</div>\"\n}if(!e){h[g++]=\"<div class='contactHeaderTags' id='\";\nh[g++]=j;\nh[g++]=\"'></div>\"\n}h[g++]=\"</td><td class='rowType' valign='top'>\";\nif(m){h[g++]=\"<table role=\\\"presentation\\\" class='ZPropertySheet' cellspacing='6'><tr><td class='contactLocation'>\";\nh[g++]=ZmMsg.accountLabel;\nh[g++]=\"</td><td class='companyFolder'>\";\nh[g++]=AjxStringUtil.htmlEncode(m);\nh[g++]=\"</td></tr></table>\"\n}if(!e){if(i.addrbook){h[g++]=AjxImg.getImageHtml({imageName:i.addrbook.getIconWithColor(),altText:ZmMsg.locationLabel});\nh[g++]=\"&nbsp;\";\nh[g++]=i.addrbook.getName()\n}else{h[g++]=AjxImg.getImageHtml(\"GAL\");\nh[g++]=\"&nbsp;\";\nh[g++]=ZmMsg.GAL\n}}else{h[g++]=\"<table role=\\\"presentation\\\" class='ZPropertySheet' cellspacing='6'><tr><td id='\";\nh[g++]=i.id;\nh[g++]=\"_locationLabel' class='contactLocation'>\";\nh[g++]=ZmMsg.locationLabel;\nh[g++]=\"</td><td id='\";\nh[g++]=i.id;\nh[g++]=\"_LOCATION_FOLDER'></td></tr></table>\"\n}h[g++]=\"</td></tr>\";\nreturn f?h.length:h.join(\"\")\n},{id:\"abook.Contacts#SplitView_header\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_headerName\",function(a,c,h,g){var e=Boolean(g);\nh=(typeof h==\"string\"?{id:h}:h)||{};\ng=g||[];\nvar f=g.length;\nvar j=h.contact;\nvar k=appCtxt.get(ZmSetting.PHONETIC_CONTACT_FIELDS);\nvar b=j.getFullNameForDisplay(k);\nif(!k){b=AjxStringUtil.htmlEncode(b)\n}var i=j.getAttr(ZmContact.F_nickname);\nvar d=h.isEdit;\nif(d&&h.contact.isDistributionList()){b=\"\"\n}g[f++]=\"<div id='\";\ng[f++]=h.id;\ng[f++]=\"_contactName' class='contactHeader \";\ng[f++]=h.isInTrash?\"Trash\":\"\";\ng[f++]=\"'>\";\ng[f++]=b;\ng[f++]=\"</div>\";\nif(i&&!d){g[f++]=\"<div class='contactHeader'>&ldquo;\";\ng[f++]=AjxStringUtil.htmlEncode(i);\ng[f++]=\"&rdquo;</div>\"\n}else{if(d){g[f++]=\"<div class='contactHeader2'>\";\nif(h.contact.isDistributionList()){g[f++]=\"<table role=\\\"presentation\\\"><tr><td class='contactHeader2'>\";\nif(h.usernameEditable){g[f++]=\"<div id='\";\ng[f++]=h.id;\ng[f++]=\"_groupNameParent'></div>\"\n}else{g[f++]=AjxStringUtil.htmlEncode(h.username)\n}g[f++]=\"</td><td class='contactHeader2'>&nbsp;@\\n\";\ng[f++]=\"\\t\\t\\t\";\nif(h.domainEditable){g[f++]=\"<input type='text' autocomplete='off' size='20' id='\";\ng[f++]=h.id;\ng[f++]=\"_groupNameDomain' class='Text'>\"\n}else{g[f++]=AjxStringUtil.htmlEncode(h.domain)\n}g[f++]=\"</td></tr></table>\"\n}else{g[f++]=\"<div id='\";\ng[f++]=h.id;\ng[f++]=\"_groupNameParent'></div>\"\n}g[f++]=\"</div><div id='\";\ng[f++]=h.id;\ng[f++]=\"_tags' style='padding-top:5px;'></div>\"\n}}return e?g.length:g.join(\"\")\n},{id:\"abook.Contacts#SplitView_headerName\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_headerJobInfo\",function(a,c,h,f){var d=Boolean(f);\nh=(typeof h==\"string\"?{id:h}:h)||{};\nf=f||[];\nvar e=f.length;\nvar i=h.contact;\nvar k=appCtxt.get(ZmSetting.PHONETIC_CONTACT_FIELDS);\nvar l=i.getAttr(ZmContact.F_company);\nvar m=i.getAttr(ZmContact.F_jobTitle);\nvar g=i.getAttr(ZmContact.F_department);\nif(m||g){f[e++]=\"<div class='contactHeader2'>\";\nif(m){f[e++]=\"<span>\";\nf[e++]=AjxStringUtil.htmlEncode(m);\nf[e++]=\"</span>\"\n}if(g){if(m){f[e++]=\"\\n\";\nf[e++]=\"\\t\\t\\t\\t&nbsp;&ndash;&nbsp;\\n\";\nf[e++]=\"\\t\\t\\t\"\n}f[e++]=\"<span>\";\nf[e++]=AjxStringUtil.htmlEncode(g);\nf[e++]=\"</span>\"\n}f[e++]=\"</div>\"\n}if(l){var j=k&&i.getAttr(ZmContact.F_phoneticCompany);\nvar b=AjxStringUtil.htmlRubyEncode(l,j);\nf[e++]=\"<div class='contactHeader2'>\";\nf[e++]=b;\nf[e++]=\"</div>\"\n}return d?f.length:f.join(\"\")\n},{id:\"abook.Contacts#SplitView_headerJobInfo\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_dlmember-collapsed\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<td \";\na[c++]=e.expandTdText;\na[c++]=\">\";\na[c++]=e.html.join(\"\");\na[c++]=\"</td><td class=rowLabel>\";\na[c++]=e.contact.canExpand?ZmMsg.membersLabel:\"\";\na[c++]=\"</td><td colspan='2' class='rowValue'>\";\na[c++]=e.value;\na[c++]=\"</td>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#SplitView_dlmember-collapsed\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_dlmember-expanded\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<td \";\na[c++]=e.first?e.expandTdText:\"\";\na[c++]=\">\";\na[c++]=e.html.join(\"\");\na[c++]=\"</td><td class='rowLabel'>\";\na[c++]=e.first?ZmMsg.membersLabel:\"\";\na[c++]=\"</td><td colspan='2' class='rowValue'>\";\na[c++]=e.value;\na[c++]=\"</td>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#SplitView_dlmember-expanded\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_address_value\",function(c,g,f,b){var e=Boolean(b);\nf=(typeof f==\"string\"?{id:f}:f)||{};\nb=b||[];\nvar d=b.length;\nb[d++]=\"<tr valign='top'><td class='rowLabel'><!-- only show the first label visually --><label for='\";\nb[d++]=f.labelId;\nb[d++]=\"' class='\";\nb[d++]=f.first?\"\":\"ScreenReaderOnly\";\nb[d++]=\"'>\\n\";\nb[d++]=\"\\t\\t\\t\\t\";\nb[d++]=f.label;\nb[d++]=\"\\n\";\nb[d++]=\"\\t\\t\\t</label></td><td id='\";\nb[d++]=f.labelId;\nb[d++]=\"' class='rowValue'>\";\nvar a=f.address;\nif(a.Street){b[d++]=\"<div>\";\nb[d++]=a.Street;\nb[d++]=\"</div>\"\n}if(a.City||a.State||a.PostalCode){b[d++]=\"<div><span>\";\nb[d++]=a.City;\nb[d++]=\"</span>\";\nif(a.City&&a.State){b[d++]=\", \"\n}b[d++]=\"<span>\";\nb[d++]=a.State;\nb[d++]=\"</span>\";\nif(a.City||a.State){b[d++]=\"&nbsp;\"\n}b[d++]=\"<span>\";\nb[d++]=a.PostalCode;\nb[d++]=\"</span></div>\"\n}if(a.Country){b[d++]=\"<div>\";\nb[d++]=a.Country;\nb[d++]=\"</div>\"\n}b[d++]=\"</td><td class='rowType'><label for='\";\nb[d++]=f.labelId;\nb[d++]=\"'>\\n\";\nb[d++]=\"\\t\\t\\t\\t&nbsp;\";\nb[d++]=f.type;\nb[d++]=\"</label></td></tr>\";\nreturn e?b.length:b.join(\"\")\n},{id:\"abook.Contacts#SplitView_address_value\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitView_list_item\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<tr valign='top'>\";\nif(e.isDL){a[c++]=\"<td><div class='ImgBlank_16'></div></td>\"\n}a[c++]=\"<td class='rowLabel' id='\";\na[c++]=e.labelId;\na[c++]=\"_label'><!-- only show the first label visually --><label for='\";\na[c++]=e.labelId;\na[c++]=\"_label' class='\";\na[c++]=e.first?\"\":\"ScreenReaderOnly\";\na[c++]=\"'>\\n\";\na[c++]=\"\\t\\t\\t\";\na[c++]=e.label;\na[c++]=\"\\n\";\na[c++]=\"\\t\\t</label></td><td id='\";\na[c++]=e.labelId;\na[c++]=\"_value' \";\na[c++]=e.type?\"\":\"colspan='2'\";\na[c++]=\" class='rowValue' aria-labelledby='\";\na[c++]=e.labelId;\na[c++]=\"_label \";\na[c++]=e.labelId;\na[c++]=\"_type'>\";\na[c++]=e.value;\na[c++]=\"</td>\";\nif(e.type){a[c++]=\"<td id='\";\na[c++]=e.labelId;\na[c++]=\"_type' class='rowType'><label for='\";\na[c++]=e.labelId;\na[c++]=\"_label'>\\n\";\na[c++]=\"\\t\\t\\t\\t&nbsp;\";\na[c++]=e.type;\na[c++]=\"\\n\";\na[c++]=\"\\t\\t\\t</label></td>\"\n}a[c++]=\"</tr>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#SplitView_list_item\"},false);\nAjxTemplate.register(\"abook.Contacts#SplitViewGroup\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table class='contactContentTable'>\";\na[c++]=AjxTemplate.expand(\"abook.Contacts#SplitView_header\",e);\na[c++]=\"</table>\";\nif(e.dlInfo){a[c++]=\"<table role=\\\"presentation\\\" class='contactHeaderSubTable NoneBg ZPropertySheet' width='100%' cellspacing='6'><tr><td><ul id='\";\na[c++]=e.id;\na[c++]=\"_subscriptionMsg' style='margin:.5em 0;padding-left:53px;'></ul></td><td id='\";\na[c++]=e.id;\na[c++]=\"_subscriptionButton'></td></tr></table>\"\n}a[c++]=\"<div class='contactGroupList' style='overflow:auto;'>\";\na[c++]=ZmContactSplitView.showContactGroup(e);\na[c++]=\"</div>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#SplitViewGroup\"},false);\nAjxTemplate.register(\"abook.Contacts#SimpleView-NoResults\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" width='100%'><tr><td class='NoResults'>\";\na[c++]=AjxMsg.noResults;\na[c++]=\"</td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#SimpleView-NoResults\"},false);\nAjxTemplate.register(\"abook.Contacts#GroupView\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table class='ZPropertySheet'>\";\na[c++]=AjxTemplate.expand(\"abook.Contacts#SplitView_header\",e);\na[c++]=\"</table>\";\na[c++]=AjxTemplate.expand(\"abook.Contacts#GroupViewMembers\",e);\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#GroupView\"},false);\nAjxTemplate.register(\"abook.Contacts#DlView\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table class='ZPropertySheet'>\";\na[c++]=AjxTemplate.expand(\"abook.Contacts#SplitView_header\",e);\na[c++]=\"</table><div id='\";\na[c++]=e.id;\na[c++]=\"_tabViewContainer'></div>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#DlView\"},false);\nAjxTemplate.register(\"abook.Contacts#DlPropertiesView\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\nif(e.contact.isDistributionList()){a[c++]=\"<table role=\\\"presentation\\\" width='100%' class='ZmEditContactView'><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.displayNameLabel;\na[c++]=\"</td><td class='rowValue'><div class='DwtInputField'><input type='text' autocomplete='off' id='\";\na[c++]=e.id;\na[c++]=\"_dlDisplayName' class='Text' style='width:45em;'></div></td></tr><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.descriptionLabel;\na[c++]=\"</td><td class='rowValue'><div class='DwtInputField'><textarea rows='4' id='\";\na[c++]=e.id;\na[c++]=\"_dlDesc' style='width:45em;'></textarea></div></td></tr><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.directoryLabel;\na[c++]=\"</td><td class='rowValue rowCheckGroup'><input type='checkbox' id='\";\na[c++]=e.id;\na[c++]=\"_dlHideInGal'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlHideInGal'>\";\na[c++]=ZmMsg.hiddenInGlobal;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.mailLabel;\na[c++]=\"</td><td class='rowValue rowRadioGroup'><input type='radio' name='mailPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicyANYONE'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicyANYONE'>\";\na[c++]=ZmMsg.mailAnyone;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><input type='radio' name='mailPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicyMEMBERS'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicyMEMBERS'>\";\na[c++]=ZmMsg.mailOnlyMembers;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><input type='radio' name='mailPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicyINTERNAL'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicyINTERNAL'>\";\na[c++]=ZmMsg.mailOnlyInternal;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><input type='radio' name='mailPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicySPECIFIC'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlMailPolicySPECIFIC'>\";\na[c++]=ZmMsg.mailOnlySpecific;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><div class='DwtInputField'><input type='text' autocomplete='off' id='\";\na[c++]=e.id;\na[c++]=\"_dlListSpecificMailers' class='Text' style='margin-left:2em;width:43em;'></div></td></tr><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.newSubscriptionsLabel;\na[c++]=\"</td><td class='rowValue rowRadioGroup'><input type='radio' name='subscriptionPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlSubscriptionPolicyACCEPT'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlSubscriptionPolicyACCEPT'>\";\na[c++]=ZmMsg.policyAccept;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><input type='radio' name='subscriptionPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlSubscriptionPolicyAPPROVAL'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlSubscriptionPolicyAPPROVAL'>\";\na[c++]=ZmMsg.policyApproval;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><input type='radio' name='subscriptionPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlSubscriptionPolicyREJECT'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlSubscriptionPolicyREJECT'>\";\na[c++]=ZmMsg.policyReject;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.unsubscriptionsRequestLabel;\na[c++]=\"</td><td class='rowValue rowRadioGroup' ><input type='radio' name='unsubscriptionPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlUnsubscriptionPolicyACCEPT'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlUnsubscriptionPolicyACCEPT'>\";\na[c++]=ZmMsg.policyAccept;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><input type='radio' name='unsubscriptionPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlUnsubscriptionPolicyAPPROVAL'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlUnsubscriptionPolicyAPPROVAL'>\";\na[c++]=ZmMsg.policyApproval;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'></td><td class='rowValue'><input type='radio' name='unsubscriptionPolicy' id='\";\na[c++]=e.id;\na[c++]=\"_dlUnsubscriptionPolicyREJECT'><label for='\";\na[c++]=e.id;\na[c++]=\"_dlUnsubscriptionPolicyREJECT'>\";\na[c++]=ZmMsg.policyReject;\na[c++]=\"</label></td></tr><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.listOwnersLabel;\na[c++]=\"</td><td class='rowValue'><div class='DwtInputField'><input type='text' autocomplete='off' id='\";\na[c++]=e.id;\na[c++]=\"_dlListOwners' class='Text' style='width:45em;'></div></td></tr><tr><td class='rowLabel'>\";\na[c++]=ZmMsg.notesLabel;\na[c++]=\"</td><td class='rowValue'><div class='DwtInputField'><textarea rows='4' id='\";\na[c++]=e.id;\na[c++]=\"_dlNotes' style='width:45em;'></textarea></div></td></tr></table>\"\n}return d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#DlPropertiesView\"},false);\nAjxTemplate.register(\"abook.Contacts#GroupViewMembers\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" width='100%' height='100%' class='ZPropertySheet' cellspacing='6'><tr><!-- content: left pane --><td width='50%' valign='top'><div class='groupMembers' id='\";\na[c++]=e.id;\na[c++]=\"_groupMembers'></div></td><!-- content: right pane --><td width='50%' valign='top'><table role=\\\"presentation\\\" width='100%'><tr id='\";\na[c++]=e.id;\na[c++]=\"_searchFieldsRow'><td width='50'>&nbsp;</td><td><table role=\\\"presentation\\\" class='ZPropertySheet' cellspacing='6'>\";\nif(e.detailed){a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchNameRow'><td align='right'>\";\na[c++]=ZmMsg.nameLabel;\na[c++]=\"</td><td><input type='text' id='\";\na[c++]=e.id;\na[c++]=\"_searchNameField'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_searchButton' valign='top' rowspan='3'></td></tr>\";\nif(appCtxt.get(ZmSetting.PHONETIC_CONTACT_FIELDS)){a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchPhoneticRow'><td align='right'>\";\na[c++]=ZmMsg.phoneticNameLabel;\na[c++]=\"</td><td><input type='text' id='\";\na[c++]=e.id;\na[c++]=\"_searchPhoneticField'></td></tr>\"\n}a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchEmailRow'><td align='right'>\";\na[c++]=ZmMsg.emailAddrLabel;\na[c++]=\"</td><td><input type='text' id='\";\na[c++]=e.id;\na[c++]=\"_searchEmailField'></td></tr><tr id='\";\na[c++]=e.id;\na[c++]=\"_searchDepartmentRow'><td align='right'>\";\na[c++]=ZmMsg.departmentLabel;\na[c++]=\"</td><td><input type='text' id='\";\na[c++]=e.id;\na[c++]=\"_searchDepartmentField'></td></tr>\"\n}else{a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchRow'><td align='right'>\";\na[c++]=ZmMsg.findLabel;\na[c++]=\"</td><td><input type='text' id='\";\na[c++]=e.id;\na[c++]=\"_searchField'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_searchButton'></td></tr>\"\n}if(e.showSearchIn){a[c++]=\"<tr><td align='right'>\";\na[c++]=ZmMsg.searchIn;\na[c++]=\"</td><td colspan='2' id='\";\na[c++]=e.id;\na[c++]=\"_listSelect'></td></tr>\"\n}a[c++]=\"</table></td></tr><tr><td width='50'><table role=\\\"presentation\\\" width='100%' class='ZPropertySheet' cellspacing='6'><tr><td id='\";\na[c++]=e.id;\na[c++]=\"_addButton'></td></tr><tr><td id='\";\na[c++]=e.id;\na[c++]=\"_addAllButton'></td></tr></table></td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_listView'></div><table role=\\\"presentation\\\" width='100%' class='ZPropertySheet' cellspacing='6'><tr id='\";\na[c++]=e.id;\na[c++]=\"_navButtonsRow'><td width='100%'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_prevButton'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_nextButton'></td></tr></table></td></tr><tr id='\";\na[c++]=e.id;\na[c++]=\"_manualAddRow'><td width='50'><table role=\\\"presentation\\\" width='100%' class='ZPropertySheet' cellspacing='6'><tr><td id='\";\na[c++]=e.id;\na[c++]=\"_addNewButton'></td></tr></table></td><td><table role=\\\"presentation\\\" width='100%' class='ZPropertySheet' cellspacing='6'><tr><td>\";\na[c++]=ZmMsg.enterAddrBelow;\na[c++]=\"</td></tr><tr><td><textarea class='groupMembers groupMembersInput' id='\";\na[c++]=e.id;\na[c++]=\"_addNewField'></textarea></td></tr></table></td></tr></table></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#GroupViewMembers\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmAlphabetBar\",function(b,g,f,a){var e=Boolean(a);\nf=(typeof f==\"string\"?{id:f}:f)||{};\na=a||[];\nvar d=a.length;\na[d++]='<center><table role=\"presentation\" id=\\'';\na[d++]=f.id;\na[d++]=\"_alphabet' width='80%' class='AlphabetBarTable'' cellspacing='0'><tr>\";\nfor(var c=0;\nc<f.numLetters;\nc++){a[d++]='<td _idx=\"';\na[d++]=c;\na[d++]=\"\\\"\\trole='button'\\n\";\na[d++]=\"\\t\\t\\t\\t\\t\\tclass='DwtButton AlphabetBarCell'\";\nif(f.alphabet[c].length>1){a[d++]=\" colspan='\";\na[d++]=f.alphabet[c].length/2+1;\na[d++]=\"' \"\n}a[d++]=\" >\";\na[d++]=f.alphabet[c];\na[d++]=\"</td>\"\n}a[d++]=\"</tr></table></center>\";\nreturn e?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmAlphabetBar\"},false);\nAjxTemplate.register(\"abook.Contacts#Tooltip\",function(a,b,g,f){var c=Boolean(f);\ng=(typeof g==\"string\"?{id:g}:g)||{};\nf=f||[];\nvar d=f.length;\nf[d++]=\"<table role=\\\"presentation\\\" width='250'><tr><td colspan='2' valign='top'><div style='border-bottom:1px solid black;margin-bottom:2px;'><table role=\\\"presentation\\\" width='100%'><tr valign='bottom'><td style='font-weight:bold;'>\";\nf[d++]=AjxStringUtil.htmlEncode(g.entryTitle);\nf[d++]=\"</td><td align='right'>\";\nf[d++]=AjxImg.getImageHtml(g.contact.getIcon());\nf[d++]=\"</td></tr></table></div></td></tr>\";\nif(g.contact.isGroup()){var e=g.contact.getGroupMembers().good.getArray();\nfor(var h=0;\nh<e.length;\nh++){f[d++]=\"<tr><td width=20>\";\nf[d++]=AjxImg.getImageHtml(\"Message\");\nf[d++]=\"</td><td>\";\nf[d++]=AjxStringUtil.htmlEncode(e[h].toString());\nf[d++]=\"</td></tr>\"\n}}else{f[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:\"fullName\"});\nvar k=ZmMsg.contactTooltipWorkInfoOrder.split(\",\");\nvar h;\nfor(h=0;\nh<k.length;\nh++){f[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:k[h]})\n}f[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:\"mobilePhone\"});\nf[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:\"workPhone\"});\nf[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:\"homePhone\"});\nif(g.contact.isGal){var j=g.contact.getEmails();\nfor(var h=0;\nh<j.length&&j.length<=3;\nh++){f[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:\"email\",val:j[h]})\n}f[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:\"notes\",truncate:500})\n}else{f[d++]=AjxTemplate.expand(\"abook.Contacts#AddTooltipEntry\",{data:g,field:\"email\",val:g.contact._lookupEmail||g.email})\n}}if(g.hint){f[d++]=\"<tr><td colspan='2'><div class='TooltipHint'><hr color=black size=1>\";\nf[d++]=g.hint;\nf[d++]=\"</div></td></tr>\"\n}f[d++]=\"</table>\";\nreturn c?f.length:f.join(\"\")\n},{id:\"abook.Contacts#Tooltip\"},false);\nAjxTemplate.register(\"abook.Contacts#TooltipNotInAddrBook\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\nif(e.hint){a[c++]=\"<table role=\\\"presentation\\\" width='250'><tr><td valign='top'>\";\nif(appCtxt.get(ZmSetting.CONTACTS_ENABLED)){a[c++]=\"<div style='border-bottom:1px solid black;'><table role=\\\"presentation\\\" width='100%'><tr valign='bottom'><td style='font-weight:bold;'>\";\na[c++]=ZmMsg.newContact;\na[c++]=\"</td><td align='right'>\";\na[c++]=AjxImg.getImageHtml(\"NewContact\");\na[c++]=\"</td></tr></table></div>\"\n}a[c++]=\"<div class='TooltipNotInAddrBook'>\";\na[c++]=AjxStringUtil.htmlEncode(e.addrstr);\na[c++]=\"</div><hr color='black' size='1'><div class='TooltipHint'>\";\na[c++]=e.hint;\na[c++]=\"</div></td></tr></table>\"\n}else{a[c++]=\"<span style='font-weight:bold;'> \";\na[c++]=ZmMsg.emailLabel;\na[c++]=\" </span>\";\na[c++]=AjxStringUtil.htmlEncode(e.addrstr)\n}return d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#TooltipNotInAddrBook\"},false);\nAjxTemplate.register(\"abook.Contacts#AddTooltipEntry\",function(c,h,f,b){var e=Boolean(b);\nf=(typeof f==\"string\"?{id:f}:f)||{};\nb=b||[];\nvar d=b.length;\nif(f.val==null){var a=appCtxt.get(ZmSetting.PHONETIC_CONTACT_FIELDS);\nf.val=f.field==\"fullName\"?f.data.contact.getFullNameForDisplay(a):f.data.contact.getAttr(f.field)\n}if(f.val!=null&&f.val!=\"\"){b[d++]=\"<tr valign='top'><td class='ZmTooltipLabel'>\";\nb[d++]=AjxMessageFormat.format(ZmMsg.makeLabel,AjxStringUtil.htmlEncode(ZmContact._AB_FIELD[f.field]));\nb[d++]=\"</td>\";\nif(f.truncate){b[d++]=\"<td>\";\nb[d++]=AjxMessageFormat.format(ZmMsg.makeLabel,AjxStringUtil.htmlEncode(f.val.substring(0,f.truncate)));\nb[d++]=\"</td>\"\n}else{var g=\"\";\nif(f.field==\"fullName\"){g=a?f.val:AjxStringUtil.htmlEncode(f.val)\n}else{g=AjxStringUtil.htmlEncode(f.val)\n}b[d++]=\"<td style='white-space:nowrap;'>\";\nb[d++]=g;\nb[d++]=\"</td>\"\n}b[d++]=\"</tr>\"\n}return e?b.length:b.join(\"\")\n},{id:\"abook.Contacts#AddTooltipEntry\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmContactPicker\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<div class='ZmContactPicker'><table><tr><td rowspan=\\\"2\\\" id='\";\na[c++]=e.id;\na[c++]=\"_habTree' valign=\\\"top\\\"></td><td><table role=\\\"presentation\\\" width='100%'><tr><td width='600'><table role=\\\"presentation\\\" class='ZPropertySheet' cellspacing='6' id='\";\na[c++]=e.id;\na[c++]=\"_searchTable'>\";\nif(e.detailed){a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchNameRow'><td align='right'><span id='\";\na[c++]=e.id;\na[c++]=\"_searchNameFieldLbl'>\";\na[c++]=ZmMsg.nameLabel;\na[c++]=\"</span></td><td><input type='text' placeholder=\\\"\";\na[c++]=ZmMsg.contactPickerHint;\na[c++]=\"\\\" autocomplete='off' size='30' nowrap id='\";\na[c++]=e.id;\na[c++]=\"_searchNameField' aria-labelledby='\";\na[c++]=e.id;\na[c++]=\"_searchNameFieldLbl'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_searchButton' rowspan='3' valign='top'></td><td width='20' valign='middle'><div id='\";\na[c++]=e.id;\na[c++]=\"_searchIcon' class='ImgSearch'></div></td></tr>\";\nif(appCtxt.get(ZmSetting.PHONETIC_CONTACT_FIELDS)){a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchPhoneticRow'><td align='right'><span id='\";\na[c++]=e.id;\na[c++]=\"_searchPhoneticNameFieldLbl'>\";\na[c++]=ZmMsg.phoneticNameLabel;\na[c++]=\"</span></td><td><input type='text' placeholder=\\\"\";\na[c++]=ZmMsg.contactPickerPhoneticHint;\na[c++]=\"\\\" autocomplete='off' size='30' nowrap id='\";\na[c++]=e.id;\na[c++]=\"_searchPhoneticField' aria-labelledby='\";\na[c++]=e.id;\na[c++]=\"_searchPhoneticNameFieldLbl'></td></tr>\"\n}a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchEmailRow'><td align='right'><span id='\";\na[c++]=e.id;\na[c++]=\"_searchEmailFieldLbl'>\";\na[c++]=ZmMsg.emailAddrLabel;\na[c++]=\"</span></td><td><input type='text' placeholder=\\\"\";\na[c++]=ZmMsg.contactPickerEmailHint;\na[c++]=\"\\\"autocomplete='off' size='30' nowrap id='\";\na[c++]=e.id;\na[c++]=\"_searchEmailField' aria-labelledby='\";\na[c++]=e.id;\na[c++]=\"_searchEmailFieldLbl'></td></tr><tr id='\";\na[c++]=e.id;\na[c++]=\"_searchDepartmentRow'><td align='right'><span id='\";\na[c++]=e.id;\na[c++]=\"_searchDepartmentFieldLbl'>\";\na[c++]=ZmMsg.departmentLabel;\na[c++]=\"</span></td><td><input type='text' placeholder=\\\"\";\na[c++]=ZmMsg.contactPickerDepartmentHint;\na[c++]=\"\\\" autocomplete='off' size='30' nowrap id='\";\na[c++]=e.id;\na[c++]=\"_searchDepartmentField' aria-labelledby='\";\na[c++]=e.id;\na[c++]=\"_searchDepartmentFieldLbl'></td></tr>\"\n}else{a[c++]=\"<tr id='\";\na[c++]=e.id;\na[c++]=\"_searchRow'><td><input type='text' placeholder=\\\"\";\na[c++]=ZmMsg.contactPickerHint;\na[c++]=\"\\\" autocomplete='off' nowrap id='\";\na[c++]=e.id;\na[c++]=\"_searchField' style='width:25em;' aria-label='\";\na[c++]=ZmMsg.search;\na[c++]=\"'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_searchButton'></td><td width='20' valign='middle'><div id='\";\na[c++]=e.id;\na[c++]=\"_searchIcon' class='ImgSearch'></div></td></tr>\"\n}a[c++]=\"</table></td><td align='right' valign='bottom'>\";\nif(e.showSelect){a[c++]=\"<table role=\\\"presentation\\\" class='ZPropertySheet' cellspacing='6'><tr><td class='Label nobreak' id='\";\na[c++]=e.id;\na[c++]=\"_listSelectLbl'>\";\na[c++]=ZmMsg.showNames;\na[c++]=\"</td><td id='\";\na[c++]=e.id;\na[c++]=\"_listSelect'></td></tr></table>\"\n}a[c++]=\"</td></tr></table></td></tr><tr><td><div id='\";\na[c++]=e.id;\na[c++]=\"_chooser'></div></td></tr><tr><td>&nbsp;</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_paging' style='margin-left:5px;'><table role=\\\"presentation\\\" width='100%'><tr><td id='\";\na[c++]=e.id;\na[c++]=\"_pageLeft'></td><td id='\";\na[c++]=e.id;\na[c++]=\"_pageRight' align='right'></td></tr></table></div></td></tr></table></div>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmContactPicker\"},false);\nAjxTemplate.register(\"abook.Contacts#ZmContactSearch\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<div id='\";\na[c++]=e.id;\na[c++]=\"_preamble'></div><table role=\\\"presentation\\\" width='100%'><tr><td><table role=\\\"presentation\\\"><tr><td width='20' valign='middle'><div id='\";\na[c++]=e.id;\na[c++]=\"_searchIcon' class='ImgSearch'></div></td><td><input type='text' autocomplete='off' size='30' nowrap id='\";\na[c++]=e.id;\na[c++]=\"_searchField'>&nbsp;</td><td id='\";\na[c++]=e.id;\na[c++]=\"_searchButton'></td></tr></table></td><td align='right'>\";\nif(e.showSelect){a[c++]=\"<table role=\\\"presentation\\\"><tr><td class='Label nobreak'>\";\na[c++]=ZmMsg.showNames;\na[c++]=\"&nbsp;</td><td id='\";\na[c++]=e.id;\na[c++]=\"_folders'></td></tr></table>\"\n}a[c++]=\"</td></tr></table><div id='\";\na[c++]=e.id;\na[c++]=\"_results' class='contactSearchResultsDiv'></div>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#ZmContactSearch\"},false);\nAjxTemplate.register(\"abook.Contacts#QuickAddPrompt\",function(b,f,e,a){var d=Boolean(a);\ne=(typeof e==\"string\"?{id:e}:e)||{};\na=a||[];\nvar c=a.length;\na[c++]=\"<table role=\\\"presentation\\\" class='ZPropertySheet' cellspacing='6'><tr><td class='ZmFieldLabelRight'>\";\na[c++]=ZmMsg.firstNameLabel;\na[c++]=\"</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_FIRST_NAME'></div></td></tr><tr><td class='ZmFieldLabelRight'>\";\na[c++]=ZmMsg.lastNameLabel;\na[c++]=\" </td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_LAST_NAME'></div></td></tr><tr><td class='ZmFieldLabelRight'>\";\na[c++]=ZmMsg.emailLabel;\na[c++]=\"</td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_EMAIL'></div></td></tr><tr><td class='ZmFieldLabelRight'>\";\na[c++]=ZmMsg.addressBookLabel;\na[c++]=\" </td><td><div id='\";\na[c++]=e.id;\na[c++]=\"_ADDR_BOOK'></div></td></tr></table>\";\nreturn d?a.length:a.join(\"\")\n},{id:\"abook.Contacts#QuickAddPrompt\"},false)\n};\n"
                    },
                    "redirectURL": "",
                    "headersSize": 364,
                    "bodySize": 133584
                },
                "cache": {},
                "timings": {
                    "send": 0,
                    "wait": 0,
                    "receive": 0
                }
            }
        ],
        "_webSocketEntries": {},
        "_settings": {
            "_proxy": {}
        }
    }
}
